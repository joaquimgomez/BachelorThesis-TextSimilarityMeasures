chapter 2 region-bas caption text extract miriam leon, veronica vilaplana, antoni gasul ferran marqu abstract chapter present method caption text detection. propos method includ gener index deal semant concept automat detect well. coher detect system, object detect algorithm us common imag description, hierarch region-bas imag model. propos method take advantag textur geometr featur detect caption text. textur featur estim wavelet analysi mainli appli text candid spotting. turn, text characterist verif reli geometr features, estim exploit region-bas imag model. analysi region hierarchi provid final caption text objects. final step consist analysi output perform binar algorithm robustli estim threshold caption text area support. keyword text detect local binari partit tree m. leon (b) v. vilaplana a. gasul f. marqu technic univers catalonia, barcelona, spain e-mail: v. vilaplana e-mail: a. gasul e-mail: f. marqu e-mail: n. adami et al. (eds.), analysis, retriev deliveri multimedia content, 21 lectur note electr engin 158, doi: 10.1007/978-1-4614-3831-1_2, springer science+busi media new york 2013 22 m. leon et al. 2.1 introduct semant imag index reli annot presenc scene priori defin semant concepts. level abstraction, semant concept commonli associ objects. however, object detect non- solv problem gener framework extract text scene provid addit relev inform semant scene analysi [1]. special true caption text usual synchron scene content. caption text artifici superimpos video time edit usual underscor summar video content. make caption text particularli us build keyword index [2]. example, recogn given locat (for example, street), addit inform obtain recogn build image, caption text associ scene given citi help confirm location. propos [3], text detect algorithm classifi categories: work compress domain work spatial domain. independ domain, algorithm divid phases: (i) text candid spotting, attempt separ text background done; (ii) text characterist verification, text candid region group discard region wrongli selected; (iii) consist analysi output, re- gion repres text modifi obtain us charact represent input ocr. chapter, develop phase algorithm context caption text. caption text detector present work includ gener index system. actually, global applic off-lin enrich current annot larg video databas (for instance, repositori tv broadcasters) creation instanti new descriptor futur annot new semant concept (for example, search databas person previous requir explicitli annotated). requir impos applic (i) analysi video tempor resolut provid kei frame current store (ii) us imag represent descript compact scene inform small number element and, time, gener possible, represent reus differ context (for example, detect objects) [4]. given constraint, concentr problem caption text extrac- tion images. caption text present featur typic text extract algorithms. horizont intens variat produc text exploit techniqu analyz imag transform domain, dct [5] wavelet transform [6]. spatial domain techniqu advantag featur propos edg detector spot area high probabl contain text [7]. next, spatial cohes features, size, factor, aspect ratio horizont alignment, appli check text candid region consist neighborhood discard fals posit [8]. 2 region-bas caption text extract 23 note techniqu specif text detect commonli in- depend approach deal detect semant concepts. case detect text global index system, interest common imag represent common set descriptors. imag representation, region-bas imag represent provid simplif imag term reduc number repres elements, regions. region-bas imag representation, object scene obtain union region initi partition. reduc number possibl region unions, us creat hierarchi region repres imag differ resolut levels. idea singl partit univers partit repres imag resolutions. context, object detect algorithm (and specif text detect algorithms) need analyz imag posit scale propos region hierarchi [4]. previou work, tree maxima (and minima) [9] propos hier- archic region-bas imag model text detect [10]. nevertheless, order reus represent detect objects, binari partit tree (bpt) [11] work suitabl gener object detect illustr [4] and, posteriorly, demonstr [12] case semant object differ natur human faces, sky regions, traffic signal car plates. given requirements, propos [13] method caption text extrac- tion imag hierarch region-bas imag representation. here, improv phase (text candid spot text characteris- tic verification) solut phase (consist analysi output) proposed. present concept structur follows. section 2.2 summa- rize main idea imag model [11] us object detect and, specifically, text detect [4]. sect. 2.3, region-bas caption text detect approach detailed. section structur section phase text detector described. section 2.3.1 discuss us wavelet informa- tion spot text candid imag [6]. us haar transform color domain propos extract text candid low contrast lumin component. sect. 2.3.2, geometr descriptor confirm spot candid discard fals posit [8]. case, advantag region-bas represent estim geometr descriptor [13] hierarch imag descript obtain best set text caption representatives. turn, sect. 2.3.3 describ propos final consist analysi output step. perform adapt binar algorithm robustli estim threshold area support caption text candid provid final input ocr. section 2.4 discuss result obtain technique. finally, conclus drawn sect. 2.5. 24 m. leon et al. fig. 2.1 region-bas hierarch represent 2.2 hierarch region-bas imag model binari partit tree (bpt) [11] reflect similar neighbor regions. propos hierarchi region creat merg algorithm us similar measure. start given partition, region merg- ing algorithm proce iter (1) comput similar measur pair neighbor regions, (2) select similar pair region merg new region (3) updat neighborhood similar measures. algorithm iter step (2) (3) region merg singl region. bpt store merg sequenc initi partit one-singl region representation. leav tree region initi partition. merg repres creat parent node (the new region result- ing merging) link children node (the pair region merged). bpt repres set region differ scale resolut node provid good estim object scene. bpt represent object detection, imag analyz posit scale propos bpt nodes. therefore, bpt consid mean reduc search space object detect tasks. 2 region-bas caption text extract 25 initi partit individu pixel flat zones, produc larg bpt. object detect applications, us initi partit accur partit fairli high number region appropri [4]. partit ensur accur object representation, call accuraci partit (see fig. 2.1). moreover, context object detection, useless analyz small region repres meaning objects. result, zone differenti bpt: accuraci space provid precis descript (lower scales) search space object detect task (higher scales). wai defin zone specifi point merg sequenc start region creat consid belong search space. partit obtain point merg process call search partit (see fig. 2.1). case caption text detection, text bar assum object detected, extract analysi search space. turn, case scene text detection, charact search partition. detect requir accur imag represent perform analyz node accuraci space. scene text detect detail scope work present chapter. 2.3 caption text detect approach caption text describ text ad insid rectangular bar, horizont aligned, contrast strongli bar background textur aspect. featur commonli translat type descriptors: textur geometr descriptor typic text candid spot text characterist verification, respectively. textur area detect wavelet analysis. however, approach produc fals posit (that filter geometr descrip- tors) miss low contrast areas. hand, given gener framework application, bpt creat combin color homogene- iti contour complex criteria [4]. homogen background regular shape, caption text object like appear singl node bpt. hence, propos combin approaches. stage, textur estim imag mean multi- resolut analysi haar wavelet decomposition. textur inform select highli textur region (candid regions) bpt. candid region anchor point caption text detection. order correctli estim us descriptor evalu candid regions, area support conform object shape characteristics. region evalu carri combin region-bas textur inform geometr features. node bpt pass text characterist verif stage, final caption text node select analyz bpt structure. 26 m. leon et al. (c)(b)(a) (d) (f)(e) (g) (h) fig. 2.2 exampl caption text detection. origin image, b wavelet transform, c text candid pixels, d search partition, e text candid regions, f set final select regions, g bpt show select leav (squar nodes) candid node (orang nodes), h bpt (rectangl g) show final select node text bar (green, lilac yellow nodes) discard node (red nodes) 2 region-bas caption text extract 27 2.3.1 text candid spot propos [6], textur descriptor dwt coeffici in- format determin textur area image. [13] propos us power lh hl subband haar transform (fig. 2.2b) analyz slide window fix size hw (w>h consid horizont text alignment): pll h (m, n) = 1 w h w i=1 h j=1 l hl(m + i, n + j)2, (2.1) l denot decomposit level analog express plh l . window move subband transform imag overlap half window size directions. subband analyz dwt power window contain text present high valu (>t1) subband relev valu (>t2) subband. way, pixel window classifi text candid power window satisfi follow condition: (( pll h > t1 ) (plh l > t2 )) (( pll h > t2 ) (plh l > t1 )) , (2.2) t1 t2 thresholds, t1 restrict t2 (t1 > t2). wavelet analysi produc miss low contrast areas. case caption text, miss commonli relat text background similar lumin valu chromin valu differ distinguish human visual system. take account observation, previou techniqu separ appli ycbcr imag compo- nents. final mask mark text candid obtain perform union (upsampled) mask decomposit level (fig. 2.2c) imag component. result present sect. 2.4, size slide window 6 18, l = 2, t1y = 1200 t2y = 400 luminance, t1cbcr = 18 t2cbcr = 10 chrominance. finally, region search partit (fig. 2.2d) select contain text candid pixel. moreover, texture-bas select propag bpt ancestor candid region select (fig. 2.2g). conserv polici but, stage, import miss possibl region contain text (fig. 2.2e). 28 m. leon et al. 2.3.2 text characterist verif select node, descriptor estim verifi region repres caption text object. initially, region-bas textur descriptor comput eq. (2.1) sum perform interior pixel avoid influenc wavelet coeffici gradient region boundary. descriptor mainli filter region select presenc mask (see fig. 2.2c) wrong candid pixel surround textur areas. complet verif process, geometr descriptor calcul remain candid nodes. comput descriptors, area support candid node modifi hole fill process open small structur element (typically, 9 9). stage need elimin small leak segment process introduc interlac color degrad regions. leak result noisi contour bia geometr descriptor estimation. finally, open split region components, largest connect compon select area support comput geometr descriptors. descriptor threshold node accomplish (follow restrict policy) list sequel. valu bracket indic threshold experi present sect. 2.4 standard pal format 720 576 images. rectangular (r): r rang [0, 1]. calcul rectangu- lariti discrep method [14]. rectangl fit region, discrep rectangl region measured. r greater tr ; nearer 1, similar rectangl (tr = 0.85). aspect ratio: (ar = widthb b/heightb b) rang [tar1, tar2 ], upper limit strictli necessari us discard line-lik node (tar1 = 1.33, tar2 = 20). given regular shape (close rectangular) caption text objects, ar calcul bound box (bb) node area support. height: rang [th1, th2 ] (th1 = 13 pixel charact visibl th2 = 144, quarter pal format height). area: rang [ta1 , ta2 ] (ta1 = 225, area node minimum height minimum aspect ratio, ta2 = 138.240, pal format imag area). compactness: (cc = perimeter2/area) smaller tcc , avoid node long, elong commonli interlac (tcc = 800). result appli descriptor threshold imag shown fig. 2.2a, present fig. 2.2g, verifi node mark orange. stage, verifi node present problems. first, shown fig. 2.2h, verifi node subtree; is, (complet partial) instanc caption text object repres subtree. second, imag contain collect caption text bar lai close enough, 2 region-bas caption text extract 29 merg singl node; is, singl subtre repres caption text object that, proximity, understood singl one. problem lead presenc unnecessari verifi nodes, actual repres caption text object, process consist analysi output step. case, best node subtre selected. straightforward solut select highest node subtre lead non-optim solutions, discuss [13]. work, confid valu estim node, node subtre highest confid valu final preserved. nevertheless, second problem detect presenc caption text object imag merg singl node tree, pass verif stage. configur common, instance, sport events, data particip jointli presented. case, problem sever possibl differ color font background neighbor caption text bars. bar select singl object, differ result decreas perform subsequ consist analysi output step. step reli binar valid caption text bar area support; class (charact background) homogen color, binar fail. have mind problems, propos new strategi jointli handl situat robust manner. subtre travers postorder. subtree, list possibl caption text object created. verifi node subtre compar previou caption text object store list. geometr featur verifi node analysi allow assum node belong caption text object list, verifi node analysi assign caption text object descript caption text object updated. verifi node analysi assign exist caption text object, ad list new caption text object. comparison perform simpl geometr descriptor previous extract tree nodes. particular, featur compar verifi node analysi exist caption text object coordin center mass height width modifi node bound box. combin elements, follow situat detected: 1. node complet exist caption text object: case caption text object repres singl node bpt part (for instance, interior) missing. case, y-coordin center mass height width bb present substanti change. node assign caption text object object descript updated. 2. node horizont extend exist caption text object: case caption text object split bpt horizontal- neighbor regions. y-coordin center mass height 30 m. leon et al. bound box present substanti change, width bond box increases. node assign caption text object object descript updated. situations, overlap node analysi extens area support caption text object analyzed. overlap, node assum caption text object descript updated. overlap, new caption text object defined. exampl fig. 2.2a largest text box detect separ text bar objects. figur 2.2h show subtre root node repres text box. search algorithm detect node color node text bar object, obtain text bar independ (see fig. 2.2f). 2.3.3 consist analysi output caption text object, binar step carri out. given specif characterist caption text bars, binar perform analyz line image. n (typic n=3) equidist horizont line segment select area support caption text object. mean varianc pixel line segment computed. line segment high varianc assum form text background character probabl densiti function text, assum gaussian. turn, low varianc line segment suppos repres background character probabl densiti function assum gaussian well. then, binar perform maximum likelihood approach. exampl illustr process present fig. 2.3. seen (and discuss section), approach lead good results. binar approach test lead lower performance. output binar method directli input ocr system. work, opensourc tesseract-ocr system1 train specif languag vocabulary. previous commented, binar approach assum background text statist model gaussian probabl densiti functions. assumpt stand when, instance, word given caption text bar homogen color. situat typic lead wrong bina- rizat words. order solv problem, word caption text bar segment word-by-word binar implemented. segment carri appli edg detector (in case, canni edg detector [15] similar used) caption text bar 1 2 region-bas caption text extract 31 0 50 100 150 200 250 300 0 100 200 300 line1 line2 line3 threshold 0 10 20 30 40 50 60 70 80 0 100 200 300 line1 line2 line3 threshold (a) (b) fig. 2.3 illustr caption textbinar process n = 3 area second perform dilat detect contour rectangular structur element. connect compon assum separ word previou binar approach applied. exampl us word-by-word binar process illus- trate fig. 2.4. global binar process fail differ text represent element respect second one. result global binar illustr second row fig. 2.4, second text element includ background. row fig. 2.4 show correct result obtain word-by-word binar used. exampl illustr fig. 2.6b. 32 m. leon et al. fig. 2.4 text bar binar versu word-by-word bina- rizat tabl 2.1 detect result relat number object databas detect object % 249 object correctli detect 215 86.35 % partial detect 22 8.83 % fals neg 12 4.82 % tabl 2.2 detect result relat number object second databas detect object % 2063 object correctli detect 1758 85.21 % partial detect 40 1.93 % fals neg 265 12.84 % 2.4 result techniqu test corpus, form new sport event videos, sport event videos.2 corpus, total 249 caption text object extract set 150 challeng imag text differ size color, complex background textures. results, classifi cor- rectli detected, partial detected, fals posit fals negatives, summar tabl 2.1 2.3, illustr figs. 2.5 2.6. valu express term recal precision, partial detect object (pdo) consid fals neg detect object repres good anchor point follow step (see tabl 2.3). number fals posit 24. result differ significantli [13] text bar detect separ instead singl text box. second corpu 2063 caption text object extract 649 kei frames. remark result number fals posit high presenc imag advertis panel spectators, 2 imag chapter belong tvc, televisi catalunya, copyright protected. key-fram provid tvc goal research framework i3media project. 2 region-bas caption text extract 33 (a.1) (a.2) (a.3) (b.1) (b.2) (b.3) (c.1) (c.2) (c.3) (d.1) (d.2) (d.3) (e.1) (e.2) (e.3) (f.1) (f.2) (f.3) fig. 2.5 illustr caption text detect process. column origin image; second column list final select regions; column binar result 34 m. leon et al. tabl 2.3 detect result present precis recal second databases, respect pdo outlier correct outlier correct recal 0.863 0.950 0.8521 0.871 precis 0.885 0.894 0.692 0.697 fig. 2.6 illustr caption text detect process. column origin image; second column list final select regions; column binar result number detect text bar satisfi (see tabl 2.2 2.3). nevertheless, element discard step (see fig. 2.5d, e). figur 2.5 2.6 illustr result imag exemplifi perform limit algorithm. example, present differ caption text bar detected. allow analyz bar detect isol on detect gather singl component, necessari detect text bar separ present regardless origin posit image. 2 region-bas caption text extract 35 figur 2.5a present exampl non-perfectli rectangular caption text objects. common caption text object present modif informa- tion attract viewer. observed, assum variabl shape model allow correct detect caption text objects. figur 2.5b exampl illustr fals neg partial detections. similar caption text background object mislead segment process and, cases, caption text object correctli repres bpt. moreover, illustr exampl partial detection: caption text object mark 7 report partial detect fulli extract singl node. figur 2.5c exampl fals negative. case, bar opaqu rectangular, text present lower caption bar (onli letter l) produc textur region detect text candid spot phase (see sect. 2.3.1). actually, fals neg wrong select kei frame subsequ kei frame text caption bar appear complet detected. figur 2.5d, e show repres exampl typic outliers. structur correspond highli textured, rectangular node bpt mistaken caption text blocks. nevertheless, remov follow phase consist analysi output. figur 2.5d show outliers, commonli present sport sequenc presenc imag stand spectators. figur 2.5f show exampl behaviour algorithm presenc scene text. type text present similar characterist caption text (it place close-to-rectangular bar highli contrast background) detect such. note precis result provid tabl 2.3, 25 % detect classifi fals posit relat scene text. figur 2.6a illustr robust propos algorithm variat font type. note algorithm exploit textur appear text (which common type fonts) and, therefore, present similar perform independ font. figur 2.6b present exampl us divis caption text object word subsequ separ binarization. example, text element caption object share color featur and, therefore, global binarization, assum gaussian probabl densiti function text caption object, wrong. word-by-word binar process allow correctli binaryz text elements. finally, fig. 2.6c show imag us color inform (see sect. 2.3.1) provid good results. letter fluoresc green discard text candid spot phase low contrast lumin inform used. 36 m. leon et al. 2.5 conclus work present new techniqu caption text detection. techniqu includ global index and, therefore, work common hierar- chical region-bas imag representation. techniqu combin textur informa- tion (through haar wavelet decomposition) geometr inform (through analysi region propos hierarch imag model) robustli extract caption text object scene. futur work focu creation new text descriptor analysi tempor redund text. aim improv detect text textur areas. latter, aim advantag fact text appear 2 second screen viewer understand information. acknowledg work partial found catalan broadcast corpor (ccma) mediapro spanish project cenit-2007-1012 i3media tec2007- 66858/tcm provec spanish government. refer 1. assfalg j, bertini m, colombo c, del bimbo c (2001) extract semant inform new sport video. in: proceed 2nd ispa, pp 411 2. crandal d, antani s, kasturi r (2002) extract special effect caption text event digit video. int j doc anal recog 2:138157 3. jung k, kim k, jain ak (2004) text inform extract imag video:a survey. pattern recog 37:977997 4. vilaplana v, marqu f, salembi p (2008) binari partit tree object detection. ieee tran imag process 17(11):22012216 5. zhong y, zhang h, jain ak (2000) automat caption local compress video. ieee tran pami 22(4):385393 6. li h, doermann d, kia o (2000) automat text detect track digit video. ieee tran imag process 9(1):147155 7. tekinalp s, alatan aa (2003) util texture, contrast color homogen de- tect recogn text video frames. in: ieee icip 2003, barcelona, spain 8. retornaz t, marcotegui b (2007) scene text local base ultim opening. proc ismm 1:177188 9. salembi p, olivera a, garrido l (1998) anti-extens connect oper imag sequenc processing. ieee tran imag process 7(4):555570 10. leon m, mallo s, gasul (2005) tree structured-bas caption text detect approach. in: proceed 5th iast viip, pp 220225 11. salembi p, garrido l (2000) binari partit tree effici represent imag processing, segment inform retrieval. ieee tran imag process 9(4):561576 12. vilaplana v, marqu f, leon m, gasul (2010) object detect segment hier- archic region-bas imag representation. in: proceed icip-10, ieee intern confer imag processing, pp 33933396, hong kong, china 13. leon m, vilaplana v, gasul a, marqu f (2009) caption text extract index purpos hierarch region-bas imag model. in: ieee icip 2009, el cairo, egypt 14. rosin pl (1999) measur rectangularity. mach. vis. appl. 11(4):191196 15. canni j (1986) comput approach edg detection. ieee tran pattern anal mach intel 8(6):679698 2 region-bas caption text extract 2.1 introduct 2.2 hierarch region-bas imag model 2.3 caption text detect approach 2.3.1 text candid spot 2.3.2 text characterist verif 2.3.3 consist analysi output 2.4 result 2.5 conclus work refer