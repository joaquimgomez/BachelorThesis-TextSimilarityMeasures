plan vs. real city: 3d gi analyz transform urban morpholog huerta, schade, granel (eds): connect digit europ locat place. proceed agile'2014 intern confer geograph inform science, castelln, june, 3-6, 2014. isbn: 978-90-816960-4-3 1 introduct urban process driven chang social, econom environment factor rethought [1, 2]. develop citi futur necessarili need sprawl growth past decad regener exist urban space [3]. technolog help understand process allow policymak better decis [4] deeper public particip [5] adaptable, depend liveabl citi [6]. consolid citi particular histor centre, complex urban pattern make regener process (both physic social) difficult task; nonetheless, usual area press need urban renew process [7]. transform process set handl inform morpholog built environ sensit consid urban quality, sustain security, give respons need inhabit [8]. area undergo regener processes, planner need know precis past present state citi plan better future. objective, strateg tool develop aid decision-mak process, vast pool urban data store cadastr plan databas (a) accur quantifi conform height regul todai built environ (b) evalu outcom modif height regulations. object paper explain methodolog develop precis quantifi complex interact built realiti urban regulations. 1.1 case studi case studi chosen develop methodolog old quarter sant andreu district barcelona. build area studi (figur 1) centr town sant andreu, district take name, develop underw 19th centuri incorpor barcelona. histor develop result complex urban structur suitabl us workbench test methodology, area 90 hectar contain 2,775 parcels, distribut 148 citi block main commerci street, gran sant andreu. area studi process modifi plan regul [9] effect 1976 27 municip barcelona metropolitan area. plan 1976, paramet maximum height drawn explicitli plan regulations, interpret [10] aid staff urban studi bureau urban plan depart barcelona citi council. case studi chosen citi planner know precis complianc build area maximum height allow plan regulations. methodolog develop valuabl evalu possibl outcom modif differ paramet regulations, possibl assess current built mass city. plan vs. real city: 3d gi analyz transform urban morpholog pilar garcia-almiral universitat politcnica catalunya diagon 646 barcelona, spain francesc vall dalmau universitat politcnica catalunya diagon 646 barcelona, spain montserrat moix bergada universitat politcnica catalunya diagon 646 barcelona, spain abstract citi constantli evolving: build built demolished, alter landscap cities; urban plan want citi be, undergo revis chang vision futur cities. paper present methodolog model interact citi want become. old quarter sant andreu barcelona (spain) pilot studi develop methodolog automat quantifi visual outcom regul chang strateg tool urban plan depart barcelona citi council. paper describ methodolog develop measur magnitud build conform disconform determin urban plan (current proposed), displai inform 3d, allow natur interpret results. special care methodolog approach ensur replic neighbourhood city-wid scales. methodolog interpret height staircas tower ventil courtyard neighbour entiti heights, analysi adjac relationship non-topolog geograph inform discussed. keywords: 3d gis, urban planning, urban regeneration, local management, smart visualization, topolog agil 2014 castelln, june 3-6, 2014 2 methodolog 2.1 interpret height ventil courtyard staircas tower height build store 2.5d cartographi sub-parcel dataset (be sub-parcel piec parcel distinct height neighbour sub-parcels). height inform store alphanumer string encod piec inform sub-parcel, includ number floor street level. example, sub-parcel ii+v attribut subterranean floor floor street level. case ventil courtyard (vc) staircas tower (st), sub-parcel height attribut code identifi (p vc e st). however, st volum protrud flat roof vc consid plan regul building, consequ type need assign height value. vc account 20% area sub- parcel st 2%, accur result methodolog develop automat assign height valu type entiti spatial context, consid st high floor serv parcel vc lightweight roof level lowest floor serv parcel. sub-parcel repres st, assign valu maximum height adjac sub-parcel belong parcel (figur 2) sub-parcel repres vc, assign valu lowest height adjac sub- parcel belong parcel (figur 3). calcul height assign st vc involv topolog relationships: (a) adjac polygon (b) consid polygon insid parcel. geograph inform (gis) non-topological, methodolog implement structur queri languag (sql): 1) tool convert line polygon tabl 3 id fields: line id, left polygon id right polygon id (lines) sub-parcel (volumes). 2) dictionari key-valu pair (type_dictionary) translat alphanumer encod numer valu (volumes_height) measur number floor street level (figur 4, above). 3) tabl attribut polygon side line built (lines_volumes) tabl describ previous (figur 4, below). 4) intermedi tabl reshap list union queries, exclud polygon pertain parcel fragment belong exclud sub-parcel st (figur 5, left) vc (figur 5, right). 5) aggreg queri type perform correspond valu height attribute: highest valu neighbour st lowest valu neighbour vc. figur 1: area studi sant andreu district barcelona figur 2: correct staircas tower (red) neighbour parcel (sub-parcel brown blue hues) origin state (uncorrected) volum correct figur 3: correct ventil courtyard (blue) neighbour parcel (sub-parcel brown blue hues) origin state (uncorrected) volum correct agil 2014 castelln, june 3-6, 2014 2.2 overlai oper sub-parcel volum correct height convert numer value, height compar height plan allow boolean spatial operations: (a) spatial intersect (figur 6, left), result fragment sub-parcel insid zone (b) spatial differ (figur 6, right), result fragment sub-parcel insid system (road parks). result overlai oper possibl determin conform urban plan fragment (tabl 1) build height (hb) plan height (hp). magnitud conform (measur area units) result sub-parcel fragment repres map, multipli area correspond number floor beneath exceed allow height (figur 7). map valuabl analyt tool, visual inform intuit wai differ approach develop easier interpret. tabl 1: type fragment overlai oper fragment plan entiti condit oper symbolog underbuilt zone hb - hp < 0 intersect blue hue conform zone hb = hp intersect grei overbuilt zone hb - hp > 0 intersect pink hue overbuilt system hb > 0 differ dark green conform system hb = 0 differ light green 2.3 aggreg parcel level legal allow compens overbuilt volum underbuilt on insid parcel (figur 8), accordingli aggreg calcul perform separ situat avoid aggreg oper ad posit neg number (which mathemat correct possibl accord regulations). formula 1 5 aggreg oper calcul parcel: total built area (1), maximum allow built area zone (2), overbuilt area zone (3), underbuilt area zone (4), overbuilt area system (5). ( ) ( ) ( ) ( ) | | ( ) ( ) figur 4: queri build neighbour attribut tabl figur 5: oper obtain neighbour volum insid parcel st (left) vc (right) figur 6: spatial intersect (left) differ (right) figur 7: conform urban plan fragment volum type_dictionari volumes_height volumes_height line volumes_height lines_volum poly_id parcel_id hcode hcode height type poly_id parcel_id type poly_id parcel_id type line_id poly_id_l poly_id_r poly_id parcel_id height line_id poly_l parcel_l type height_l type_l poly_r parcel_r height_r type_r lines_volum lines_volum type_r = "e" parcel_l = parcel_r type_l = "e" parcel_l = parcel_r subset line_id poly_l parcel_l height_l type_l poly_r parcel_r height_r type_r subset type_r = "p" hcode_l <> "e" parcel_l = parcel_r type_l = "p hcode_l <> "e" parcel_l = parcel_r subset line_id poly_l parcel_l height_l type_l poly_r parcel_r height_r type_r subset union queri union queri agil 2014 castelln, june 3-6, 2014 follow notation: hb: real height building, measur number floor street level. hp: maximum height accord plan, measur number floor street level. a: area polygon entiti (surfac land occupied). parc: set parcel insid area study. subp: set sub-parcels. fragz: set fragment spatial intersect parcel plan layer (in zones). frags: set fragment spatial differ parcel plan layer (in systems). 3 result 3.1 parcel level result aggreg valu displai choropleth maps, visual magnitud overbuilt underbuilt area parcel. map strateg tool citi plan depart visual identifi parcel outstand values. map overbuilt area parcel (figur 9), planner abl identifi parcel higher degre excess volum visual spatial cluster overbuilt parcel face certain street concentr specif citi blocks. map underbuilt area parcel (figur 10) allow planner visual place underbuilt parcel cluster candid successfulli implement transform policies. 3.2 new approach represent fragment level result 3d represent result 2d map unabl convei complex volumetr inform successfulli height data abstract repres plan view colour scales, hatch densiti labels. us 3d imageri allow author repres volum natur intuit wai match wai experi cities. figur 11 show criteria displai overlap inform overbuilt underbuilt fragments. dimens allow author displai overlap inform have resort 2d represent construct transpar hatching. figur 12 show result case study, viewer abl visual relat concept simultan (real height plan height) easili 2d maps. axonometr aerial photograph compar correspond result (figur 13) highlight valu methodolog develop analysi visual tool. 3d synthet imag differ built realiti plan citi appar easier interpret. figur 8: parcel overbuilt underbuilt fragment figur 9: overbuilt aggreg area parcel figur 10: underbuilt aggreg area parcel figur 11: height interpret 3d model overbuilt fragment underbuilt fragment r e l r e l ll o w e d ll o w e du n d e rb u il t o v e rb u il t underbuilt fragment compliant fragment overbuilt fragment ll o w e d r e l agil 2014 castelln, june 3-6, 2014 figur 12: volumetr analysi overbuilt (red) underbuilt (green) fragment case studi figur 13: aerial axonometr view 3d represent area source: bing map agil 2014 castelln, june 3-6, 2014 3.3 quantif outcom propos chang regul addit visual morpholog differ propos citi real built environment, methodolog allow planner precis quantifi outcom propos regul changes. figur 14 show exampl propos regul change, addit floor allow citi block. methodolog allow decision-mak measur addit built area compliant new regul number properti chang legal status. 4 conclus present methodolog approach seek assist implement better polici urban transform processes, better easier understand information, make possibl measur visual precis conform built environ determin urban plan, evalu outcom propos regul changes. 3d visual techniqu allow discoveri pattern obviou train profession valuabl tool commun result analysis. improv accuraci analysis, methodolog studi adjac relat non-topolog gi develop sql, allow assign height valu entiti didnt attribut spatial context. investigations, improv methodolog propos incorpor inform build quality, econom activ demograph inform densif process abl to: determin parcel like transform accord age, uses, habitability, econom value, etc. estim potenti number peopl affect and/or benefit regul changes. calcul taxat increas valu properti redevelop scenarios. priorit zone greater incompli and/or obsolet typolog (such outdat industries) includ transform processes. explain possibl histor reason result current morpholog city. furthermore, improv accuraci us visual result proposed: incorpor digit elev model (dem) 3d model. us augment realiti tool visual result site. acknowledg author like thank staff urban studi bureau urban plan depart barcelona citi council collaboration. figur 14: propos increas allow height citi block (above) result outcom (below) current state propos chang refer [1] a. power, demolit refurbish old ineffici home help increas environmental, social econom viability?, energi policy, vol. 36, no. 12, p. 44874501, 2008. [2] world bank, world develop report 2009: reshap econom geography, washington dc: world bank, 2008. [3] a. nelson, r. burby, e. feser, c. dawkins, e. malizia r. quercia, urban contain central-c revitalization, journal american plan association, vol. 70, no. 4, pp. 411-425, 2004. [4] p. garcia-almiral y j. roca cladera, new set reflect urban matter. integr gi technolog advanc internet, 6th agil confer geograph inform science, lyon, 2003. [5] t. yigitcanlar, australian local govern practic prospect onlin planning, urisa journal, vol. 18, no. 2, pp. 7-17, 2006. [6] v. a. ceccato f. snickars, adapt gi technolog need local planning, environ plan b: plan design, vol. 27, no. 6, pp. 923-937, 2006. [7] s. rueda palenzuela, modelo e indicador para ciudad ms sostenibles, barcelona: departa medi ambient la generalitat catalunya, 1999. [8] j. alguacil, a. hernndez, m. medina y c. moreno, la ciudad lo ciudadanos, madrid: centro publicaciones, ministerio fomento, 1997. [9] corporacin metropolitana barcelona, norma urbansticas: plan gener metropolitano ordenacin urbana la entidad municip metropolitana barcelona, barcelona: corporaci metropolitana barcelona, 1976. [10] m. riba piera, lo denominado standard urbanstico y su aplicacin al planeamiento, barcelona: urbanstica iii, escola tcnica superior darquitectura barcelona, universitat politcnica catalunya, 1982.