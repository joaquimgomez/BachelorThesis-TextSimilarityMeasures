microsoft word - energi journal v4.0 hybrid methodolog electr load forecasting: entropy-bas featur select machin learn soft comput techniqu sergio juradoa, ngela nebotb, fransisco mugicab narc avellanaa sens & control systems, arag 208-210, 08011 barcelona, spain email: email: phone: +34 605 565 303; soft comput research group, technic univers catalonia, jordi girona 1-3, 08034 barcelona, spain abstract: worldwid scientif commun current great effort research area smart grid energi production, distribution, consumpt plai critic role sustain planet. main challeng li intellig integr action user connect grid. context, electr load forecast methodolog kei compon demand-sid management. research accuraci differ machin learn methodolog determin hourli energi forecast buildings. main goal work demonstr perform model scalabl differ consumpt profiles. propos hybrid methodolog combin featur select base entropi soft comput machin learn approaches, i.e. fuzzi induct reasoning, random forest neural networks. compar tradit statist time' seri forecast techniqu arima order justifi capabl hybrid methods. addition, contrast gener approach offlin model take consider time, approach discuss work gener fast reliabl models, low comput costs. approach embedded, instance, second gener smart meters, gener on- site electr forecast hours, trade excess energi smart meters. keywords: build electr forecasting, entropy-bas featur selection, fuzzi induct reasoning, neural networks, random forest, arima 1. introduct fast develop new infrastructur electr grid, known smart grid (sg), open wide rang opportunities. sg advanc electr transmiss distribut network (or grid) us information, communication, control technolog improv economy, efficiency, reliability, secur grid [1]. nowadays, prioriti govern worldwid replace/upgrad old electr grid decad ago sg. example, 2010, govern spent $7.02b sg initiative, chines govern $7.32b sg program [2]. sg character new trend features: smart meters, demand respons mechanisms, onlin custom interact pcs/mobil devices, dynam electr tariffs, onlin billing, incorpor renew energi gener (such solar wind energy) electr vehicles, reliabl power transmiss distribution, dynam load balancing, better power quality, better power security, etc. inform technolog (it) major drive forc sg, system techniqu artifici intelligence, high perform computing, simul modelling, data network management, databas management, data warehousing, data mine facilit smooth run sg [3]. therefore, huge gap exist sg outcom expect cover year combin expert energi domain creat technolog support new scenario with: (i) novel optimis algorithm energi distribution, (ii) total control: enhanc monitor control electr grid (iii) technolog local product distribution. featur propos scenario base reliable, accur fast energi predictions. distribut demand suppli reli know individu consumpt and/or product public privat buildings, industries, distribut gener power plants, too. predict propos literatur base architecton featur heat loss surface, build shape factor, build heat volum [4][5], hous type socioeconom featur ag dwelling, size dwelling, monthli household income, number household members, etc. [6]. however, cost extract inform high term personnel tools. moreover, inform obtain intrus methods, i.e. poll households. nevertheless, massiv deploy smart meter develop sg allow energi compani access energi consumpt and/or product accuraci minutes, dwell remot metering. therefore, time-seri data collect analys form predict base histor values. approach scalable, non-intrus accur forecast approaches. advantag data gener smart meter demonstr robust data driven models, address differ machin learn soft comput methodolog hourli electr forecast buildings, differ energi profiles, locat weather conditions. valid model real electr consumpt data demonstr scalabl differ consumpt profiles. larg varieti artifici intellig (ai) techniqu appli field short-term electr consumpt forecasting, show better perform classic techniques. specifically, machin learn proven accur predict electr consumpt uncertainties. instance, khami propos [7] multilay perceptron neural network predict electr consumpt small scale power system, obtain better perform tradit methods, marvuglia et al. consid elman neural network short forecast household electr consumpt predict error 5% [8]. [9] studi electr load forecast carri cart soft comput techniqu obtain better result classic approaches. larg scale studi compar machin learn soft comput tool focus classif domain [10]. hand, extens studi regress domain. [11] nesrren et al. carri larg scale comparison machin learn model time seri forecasting. studi includ techniqu k-nearest neighbour (knn), cart regress trees, multilay perceptron networks, support vector machines, gaussian processes, bayesian neural network radial basi functions. research reveal signific differ method studi conclud best techniqu time seri forecast multilay perceptron gaussian regress appli monthli m3 time seri competit data (a thousand time series) [12]. moreover, [13] empir comparison regress analysi carri out, decis tree ann techniqu predict electr energi consumption. conclus decis tree neural network model perform slightli better regress analysi summer winter phases, respectively. however, differ type model small general, indic model techniqu compar predict energi consumption. contrast approach offlin model take consider comput time resources, model discuss work appear gener fast reliabl models, low comput costs. model embedded, instance, second gener smart meter gener on-sit forecast consumpt and/or product hours, trade excess energi smart meters. paper structur follows: section 2 analysi machin learn soft comput model approach research offered. then, section 3 present data set used, come build technic univers catalonia (upc) differ profil locations, experi performed. next, section 4 describ result obtain appli propos method data sets. section 5, discuss result encount performed. finally, section 6 give conclusions, futur work new perspectives. 2. machin learning, soft comput statist model techniqu research compar predict accuraci machin learn methodology, soft comput techniqu tradit statist method hourli energi forecast buildings: random forest (rf), artifici neural network (nn), fuzzi induct reason (fir) autoregress integr move averag (arima), respectively. featur select process (fsp) appli histor consumpt data order determin featur largest impact predict accuraci futur consumpt values. afterwards, differ experi describ section 3, designed. combin select past consumpt dai time inform input variabl model approaches. fig. 1, show scheme data flow compon build consumpt forecasting. fig. 1. compon involv build consumpt forecasting: fsp appli histor consumpt data, addit input variabl dai time information, design experi model approach work fsp chosen research piec fuzzi induct reason methodology, consist entropi instead typic correl approaches, cca[14] pca [15], import input variabl model techniques. entropi approach select set variabl better explain, whole, specif output (hence, call relevant). fsp describ section. 2.1 featur select process (fsp) work fsp fir methodolog fir model pre-process nn rf modelling. therefore, short insight fir featur select algorithm given here. fir methodolog model compos parts, i.e. model structur (or mask fir nomenclature) pattern rule base [16]. process obtain fir model structur correspond fsp. model structur hold relev featur repres mask causal relat (both spatial temporal) input output variabl described. tabl 1 present exampl mask input (u1, u2, u3, u4) output (y) variables. tabl 1 exampl mask input (u1, u2, u3, u4) output (y) x t u1 u2 u3 u4 y t - 3t -1 0 0 0 -2 t - 2t 0 -3 0 0 0 t - t 0 0 0 -4 0 t 0 0 0 0 +1 neg element mask exhibit causal relat output, i.e. influenc output certain degree. singl posit valu denot output. exampl tabl 1, predict output current time, y(t), directli relat variabl u1, u2, u4 y differ times, i.e. u1(t-3t), y(t-3t), u2(t-2t) u4(t-t). optim mask function visual-fir obtain best mask, i.e. best fir structure, studi [19]. procedur consist find mask best repres comput qualiti measur possibl masks, select highest quality. process start definit so-cal mask candid matrix encod ensembl possibl mask best chosen. best mask chosen. tabl 2 show exampl mask candid matrix exampl tabl 1. mask candid matrix contain element valu -1, mask potenti causal relations. element valu +1 found, mask output. finally, element valu 0 denot forbidden connections. tabl 2 exampl mask candid matrix input (u1, u2, u3, u4) output (y) x t u1 u2 u3 u4 y t - nt -1 -1 -1 -1 -1 t - 2t -1 -1 -1 -1 -1 t - t -1 -1 -1 -1 -1 t -1 -1 -1 -1 +1 number row mask candid matrix call depth mask. repres tempor domain influenc output. row delai rel successor time interv t repres time laps consecut samplings. t vari applic another. studi present paper, valu t 1 hour used, data characteristics. optim mask function visual-fir, offer possibl specifi upper limit accept mask complexity, i.e. largest number non-zero element mask contain. start candid matrix minimum complex two, i.e. 1 input output, qualit model identif process look best legal masks. proceed, search legal mask complex three, i.e. mask input output, find best those. continu wai maximum complex reached. strategi correspond exhaust search exponenti complexity. however, suboptim search strategi polynomi complex used, i.e. genet algorithm [18]. possibl mask compar respect potenti merit. optim mask evalu respect maxim forecast power quantifi mean qualiti measure. let focu comput qualiti specif mask. overal qualiti mask, qm, defin product uncertainti reduct measure, hr observ ratio, or, describ equat 1. . (1) uncertainti reduct measur defin equat 2. 1 (2) hm overal entropi mask hmax highest possibl entropy. hr real number rang 0.0 1.0, higher valu usual indic improv forecast power. mask highest entropi reduct valu gener forecast smallest amount uncertainty. highest possibl entropi hmax obtain probabl equal, zero entropi encount total determinist relationships. overal entropi mask comput describ equat 3. . (3) p(i) probabl input state occur hi shannon entropi rel th input state. shannon entropi rel ith input state calcul equat 4. | . | (4) p(o|i) condit probabl certain output state o occur, given input state occurred. term probabl meant statist true probabilist sense. denot quotient observ frequenc particular state episod behaviour divid highest possibl frequenc state. observ ratio, or, measur number observ input state. statist point view, state observ time [17]. legal input state observ times, equal 1.0. input state observ (no data available), equal 0.0. optim mask mask largest qm value, gener forecast smallest uncertainty, and, therefore, featur compos structur model on select relev ones. relev featur identifi model methodology. 2.2 fuzzi induct reason (fir) fig. 2. qualit simul process diagram (with exampl contain input output) conceptu fir methodolog aris gener problem solv (gsps) approach propos klir [19]. methodolog model simul abil system easili describ classic mathemat statistics, i.e. system underli physic law understood [16]. fir model qualit non-parametr model base fuzzi logic. visual-fir tool base fir methodolog (run matlab environment), offer new perspect model simul complex systems. visual-fir design process block allow treatment model identif predict phase fir methodolog compact, effici user friendli manner [20]. fir model consist structur (relev variabl select features), previous explain section 2.1, pattern rule base (a set input/output relat histori behaviour) defin if-then rules. best structur (mask) identified, obtain pattern rule (call behaviour matrix) fuzzifi train data set. pattern rule obtain read class valu hole mask (the place mask neg values), place class compos rule. behaviour matrix mask available, predict futur output state place fir infer engine, describ fig. 2. process call qualit simulation. fir infer engin base knn rule, commonli pattern recognit field. forecast output variabl obtain mean composit potenti conclus result fire k rule anteced best match actual state. mask place qualit data matrix (fuzzifi test set), wai output match element predicted. valu input read mask behaviour matrix (pattern rule base) used, explain latter, determin futur valu output, copi qualit data matrix. mask shift posit predict output value. process repeat desir valu forecast. fuzzi forecast process work follows: input pattern new input state compar previou record input state contain behaviour matrix. purpose, normal function comput element new input state euclidean distanc formula select knn, on smallest distance, forecast new output state. contribut neighbour estim predict new output state function proximity. express give distanc weight neighbour, shown fig. 2. new output state valu comput weight sum output state previous observ nearest neighbours. fir methodolog is, therefore, model simul tool abl infer model studi quickli good option real time forecasting. moreover, abl deal miss data prove larg number applic [16]. hand, weak long depth complex increas comput cost increas too, paramet choos fuzzif phase (which mitig evolutionari algorithm tune parameters). 2.3 random forest (rf) random forest (rf) set classif regress tree (cart), forward breiman [21]. rf, train sampl set base classifi construct bag algorithm [22]. tradit cart, inner node subset initi data set root node contain initi data. rf combin tree predictor tree depend valu random vector sampl independ distribut tree forest. rf regress form grow tree depend random vector tree predictor take numer valu oppos class labels. rf predictor form take averag b trees. fig. 3 show scheme random forest. fig. 3. random forest scheme contain differ tree assum follow basic notations: let number train case n number variabl p input data point , , output variabl c let number tree b schemat rf algorithm following: 1. b = 1 b a. draw bootstrap sampl z* size n train data b. grow random forest tree tb bootstrap data, recurs repeat follow step termin node tree, stop criteria reached: i. select m variabl random p variabl ii. pick best variable/split-point m iii. split node daughter node 2. output ensembl tree : | | size n bootstrap sampl z* small size size data set. however, larg train data sets, assum size affect significantli comput cost. addition, big data problem forecast consumption/product build city, good definit paramet n mandatory. moreover, differ stop criteria, commonli are: 1) minimum node size nmin reached, 2) maximum tree depth reached. rf observ overfit dataset noisi classification/regress task [23], usual provid accur results, gener learn fast. addition, suitabl handl miss data provid tree structur method regress [24]. 2.4 artifici neural network (nn) neural network popular data mine imag process tool. origin stem attempt model human thought process algorithm effici run computer. origin date 1943, neurophysiologist w. mcculloch mathematician w. pitt wrote paper neuron work [25], model simpl neural network electr circuits. year later, 1958, f. rosenblatt creat perceptron, algorithm pattern recognit base two-lay learn network simpl addit subtract [26]. time-seri model base nn [27]. despit desir featur nns, construct good network particular applic non-trivi task. involv choos appropri architectur (the number layers, number unit layer, connect units), select transfer function middl output units, design train algorithm, choos initi weights, specifi stop rule. wide accept three-lay feed forward network ident transfer function output unit logist function middle-lay unit approxim continu function arbitrarili given suffici middle-lay unit [28]. thus, network research layer feed forward network (fig. 4). input connect output middl layer. fig. 4. represent scheme three-lay feed forward neural network work univari time series, neuron input layer contain present valu relev past valu univari time series. output valu time period, comput describ equat 5. s t 1 s t , , s t n (5) n number past valu variabl s, f nonlinear function approxim multilay feed forward neural network (fnn) [29]. recurr neural network abl obtain good predict performance, architectur allow connect unit form direct cycle, allow exhibit dynam tempor behaviour. unlik feed forward neural networks, recurr network us intern memori process arbitrari sequenc inputs. therefore, recurr neural network powerful, complex extrem slow compar feed forward networks. mention earlier, main object research power predict methodolog low comput costs, embed smart meter gener on-sit forecast consumpt and/or productions. reason recurr neural network reject work cooper approach chosen instead, i.e. fsp feed forward neural network uses, input variables, relev past consumpt values. 2.5 autoregress integr move averag (arima) tradit statist time' seri forecast model incorpor compar forecast result previou hybrid ai methodolog tradit benchmark methods: arima [30]. part compos arima: autoregress model (ar), combin past values; move averag compon (ma), us past forecast error regression-lik model; integr (i), refer revers process differenc produc forecast. nonseason arima model classifi "arima(p,d,q)" model, where: p number autoregress terms, d number nonseason differ need stationarity, q number lag forecast error predict equation. forecast equat construct follows. first, let y denot dth differ y, means: d=0: yt = yt d=1: yt = yt - yt-1 d=2: yt = (yt - yt-1) - (yt-1 - yt-2) = yt - 2yt-1 + yt-2 consid time seri stationari simplifi things, d = 0, equat written as: (6) wherea0, a1 ap, nonseason autoregress coeffici correspond stabl polynomial. associ lag yth1, yth2 degre nonseason autoregress polynomi p. b0, b1 bp nonseason move averag coefficients. associ lag eth1, eth2 degre nonseason move averag polynomi q. note ethi past forecast error real ythi predict ythi. possibl includ season compon arima model, studi model season time series. contrary, want evalu robust adapt model be, chang accord season, week dai time day. 3. method 3.1 data set data build universitat politcnica catalunya (upc) obtain study. build belong differ campus locat differ cities. order demonstr scalabl model type building, function zone differ autoregress move averag profil usag locat experiments. thus, affect differ climatolog (temperature, humidity, solar radiation, etc.), consumpt patterns, schedul work days: 1) librari etseiat1 faculti terrassa 500m2; 2) bar etsav2 faculti sant cugat 150m2; 3) build differ classroom fib3 faculti barcelona 630m2. energi consumpt build collect remot meter hour. 24 record dai location. zones, data set compris year electr consumption, 13/11/2011 12/11/2012, 91% train 9% testing. test data compris 35 differ dai (i.e. 35 test sets) distribut equal year; mean 9 dai season. take account seven dai week (from mondai sunday). choos dai pretend evalu model chang caus season period(s) dai week. tabl 3 show dai chosen test data electr load forecast distribution. tabl 3 distribut test data model. case, model train 7896 data point correspond period 13/11/2011 12/11/2012 remov test dai autumn (13/11/2011 22/12/2011 + 23/9/2012 12/11/2012) winter (22/12/2011 20/3/2012) spring (21/3/2012 20/6/2012) summer (21/6/2012 22/9/2012) 23/11/2011 (wednesday) 31/12/2011 (saturday) 30/03/2012 (friday) 30/06/2012 (saturday) 3 13/12/2011 (saturdai tuesday) 10, 20 30/01/2012 (tuesday, friday, monday) 9, 19 29/04/2012 (mon., thur., sunday) 10, 20 30/07/2012 (thursday, friday, monday) 2, 12 22/10/2012 (tuesday, friday, monday) 9, 19 29/02/2012 (thurs., sunday, wednes.) 9, 19 29/05/2012 (wednes., satur., tues.) 9, 19 29/08/2012 (thurs., sunday, wednesday) 1 11/11/2012 (tuesday, friday) 10 20/03/2012 (saturday, tuesday) 8 18/06/2012 (friday, monday) 8 18/09/2012 (saturday, tuesday) 3.2 fir fsp studi model process consist in: 1) featur select mean fir methodolog 2) us relev featur deriv model propos methodology, i.e. rf, nn fir, train consumpt data year. process repeat locat depth4 studied. data test model remov initi data set replac miss values. decid build model predict electr consumpt dai ahead season instead 4 independ models, i.e. season. main reason data studi present clear trend; deseason pre-process appli want studi capac differ methodolog obtain gener models. near futur plan studi model season separ versu deseason data. fsp appli histor consumpt data hourli daili information. decid follow strategi hourli daili inform contain hour dai work day, respectively. and, therefore, valuabl inform gain actual valu previou ones. however, previou consumpt contain inform pattern import knowledg extracted. select depth number variabl crucial issu affect method sensit curs dimensionality. fsp fir used, increas number variabl (i.e. complexity) depth, qualiti result increas optim 1 etseiat: school industri aeronaut engin terrassa; 2 etsav: school architectur valls; 3 fib: barcelona school informat 4 rememb depth mask repres tempor domain influenc output, and, therefore, depth multipli t time past consid search space fsp. instanc depth 72, fir fsp search signific past valu 72 previou consumpt valu (hours). valu reached. that, increas number variabl add nois end result lower quality. empir determin variabl depth higher 72, increas significantli qualiti fsp fir, comput cost (in term time) exponentially. therefore, order catch relev previou consumpt electr load series, differ depth studied: previou 24 hours; previou 72 hours; 24 + 24: previou 24 hour past 24 hour previou week (48 past valu total correspond depth mask 168). tabl 4 present result fsp perform fir differ depth studied. observ tabl 4, featur obtain depth analys terrassa librari c6 building. make sens build similar characterist compar bar. relev featur encount sant cugat bar differ build depth 72 24+24. fsp conclud consumpt one, twelve, twenty-four sixty-thre hour one, eleven, twenty-four fifty-eight hour on best repres consumpt depth 72 24+24, respectively. tabl 4 relev hour consumpt obtain fir fsp (repres delai current time). instance, depth 24 hour used, fir fsp obtain princip featur consumpt 1, 7, 13 24 hour past depth import previou consumpt terrassa librari sant cugat bar build c6 24 previou hour 1,7,13,24 1,8,14,24 1,7,13,24 72 previou hour 1,24,31,61 1,12,24,63 1,24,30,61 24+24 previou hour 1,11,24,168 1,11,24,158 1,11,24,168 3.3 outlier detect data analysi method robust outliers, i.e. observ appear deviat markedli observ sample, extrem sensit outlier produc incoher nonsens results, presenc outliers. outlier indic bad data miss commun instanc smart meter central server hardwar errors. therefore, us detect observ exclud dataset. differ techniqu outlier detection. box plot methodolog [31],[32],[33] consist depict group numer data quartiles. box plot line extend vertic box (whiskers), indic variabl outsid upper lower quartiles. problem techniqu whisker valu select accord standard deviat coverag empir distribution, close normal distribution, observ second row fig. 6, case. similarly, [34] grubb test proposed, however, standard assumpt underli distribut normal well. apart techniqu outlier detection, import know natur data domain. electr load, unexpect chang occur times, instance, morn applianc turn resid wake up, electr load increas significantly. unexpect change, normal, detect outlier techniques. possibl solut problem treat abnorm load valu outlier us correct filter pre-process data produc qualiti observ serv input forecast models. simpl power method run median [35], consist of: 1) comput n-hour run median origin load seri ; 2) construct filter band 3 , sd () standard deviation; 3) identifi observ outsid filter band outlier run median emploi robust outlier commonli move average. advis [35] us short (n = 5) - long (n = 49) -term run medians, problem adjac outlier detect larg deviat standard rang signal. example, result filter band (upper filter band - red lower filter band - green) terrassa librari depict fig. 5. fig. 5. year electr load (blue) 3 outlier unfortunately, autom correct algorithm perform satisfactorili human expert supervis process. tabl 5 show number hour select run median, outlier detect algorithm perform algorithm human supervision. total 18 outlier detect eliminated: 14 build c6, 3 terrassa librari 1 sant cugat bar. tabl 5 paramet perform run median algorithm outlier detect instal instal number (n) hour outlier detect algorithm perform remark terrassa librari 5 3 100% build c6 49 14 87.5% outlier detect sant cugat bar 49 1 100% reason terrassa librari number hour select run median window 5 instead 49 consumpt data dynam compar build c6 sant cugat bar. mean unexpect chang observ order captur shape time seri need reduc sampl used. build c6 sant cugat bar time seri observ smooth therefore, higher run median window captur better natur data. outlier treat miss valu therefore, discard form train test datasets. reason prefer leav miss valu instead replac knn, (i) add wrong inform time seri (ii) 8.000 data instances, impact significant. jan apr jul oct 0 200 400 600 800 1000 1200 outlier terrassa librari n-hour run median kw h 3.4 statist analysi statist analysi output variable, i.e. electr load consumptions, input variables, i.e. past electr load consumptions, hour dai work dai order select best model approach. tabl 6 summar input output variabl study, introduc symbol indic type variable. tabl 6 input output variabl involv study, symbol type. stand input o output. symbol input (i) output (o) variabl type variabl x1 work dai (i) binari x2 hour dai (i) categor {0,1,,23} x3.1, x3.2, x3.3, x3.4 electr load past consumpt (i) continu y1 electr load (o) continu fig. 6 present differ graph help understand analys histor consumpt data. row mean electr load build plotted, show differ shape building. terrassa librari consumpt start increas significantli 5 maintain constant consumpt 8 pm start decrease. case c6 sant cugat bar averag load shape vari terrassa library. start increas consumpt 5:30 7 8:30 approxim slight decrease, probabl clean task start earli morn finish 7, lesson start averag 9 am. therefore, minut signific consumption. that, consumpt increas build peak 15 pm. second, fourth row fig. 6 present empir probabl distribut (histograms) y1, x1 x2 variables. histogram variabl x3.1, x3.2, x3.3 x3.4, signific past valu electr load consumpt (see tabl 4), shown fact ident represent histogram variabl y1. expected, probabl distribut variabl x2 hour, whilst variabl x1 work no-work days. plot demonstr variabl follow normal distribution. addit that, interest mention clear pattern time seri electr consumpt year, lot peak unexpect changes. clear declin consumpt august, vacat period upc. februari june exam period high densiti student terrassa library; devic connect electr grid. 0 5 10 15 20 25 0 5 10 15 20 25 30 terrassa librari hour m ea n e le ct ri ci ty l o ad ( k w h ) 0 5 10 15 20 25 70 75 80 85 90 build c6 hour m ea n e le ct ri ci ty l o ad ( k w h ) 0 5 10 15 20 25 2 3 4 5 6 7 8 9 sant cugat bar hour m ea n e le ct ri ci ty l o ad ( k w h ) fig. 6. mean electr load (first row), empir probabl distribut (second, fourth row) variabl y1, x1, x2. unit variabl y1 kilowatt-hour (kwh). variabl x1 1 valu repres work dai 0 valu non-work day. unit x2 variabl hour day. fifth sixth row present scatter plot demonstr visual relationship variabl x1 x2 y1, terrassa library, build c6 sant cugat bar row fig. 6 displai scatter plot input variabl x1 x2 normalis output variabl y1. scatter plot past electr load consumptions, i.e. x3.1, x3.2, x3.3 x3.4, normalis output variabl y1, depth 24 + 24 (see tabl 4), shown fig. 7. scatter plot figur conclud function relationship input variabl output variabl trivial. 20 40 60 80 100 0 1000 2000 3000 4000 5000 terrassa librari y1 f q u en cy 0 50 100 150 0 500 1000 1500 2000 2500 build c6 y1 f q u en cy 0 5 10 15 20 0 500 1000 1500 2000 2500 sant cugat bar y1 f q u en cy 0 0.5 1 0 2000 4000 6000 terrassa librari x1 f q u en cy 0 0.5 1 0 2000 4000 6000 build c6 x1 f q u en cy 0 0.5 1 0 2000 4000 6000 sant cugat bar x1 f q u en cy 0 5 10 15 20 25 0 100 200 300 400 terrassa librari f q u en cy x2 0 5 10 15 20 25 0 100 200 300 400 build c6 f q u en cy x2 0 5 10 15 20 25 0 100 200 300 400 sant cugat bar f q u en cy x2 0 0.2 0.4 0.6 0.8 1 0 2 4 6 8 10 terrassa librari y 1 x1 0 0.2 0.4 0.6 0.8 1 0 2 4 6 8 10 build c6 y 1 x1 0 0.2 0.4 0.6 0.8 1 0 2 4 6 8 10 sant cugat bar y 1 x1 0 5 10 15 20 25 0 2 4 6 8 10 terrassa librari y 1 x2 0 5 10 15 20 25 0 2 4 6 8 10 build c6 y 1 x2 0 5 10 15 20 25 0 2 4 6 8 10 sant cugat bar y 1 x2 except relat input variabl x3.1 output variabl y1 build c6, close linear. interest insight figur scatter plot build c6 follow similar pattern buildings, valu zero x-axi y-axis. confirm fact build consum consider electricity, hous server basement. conclus reason expect classic learners, linear regression, fail accur map input variabl output variable. therefore, plot intuit justifi need experi non-linear learner rf, nn fir. 3.5 evalu criteria measur forecast' accuraci literatur [36]. requir statist qualiti measure, abl compar differ forecast method build differ averag loads. normal mean squar error (nmse), describ equat 7, error measur evalu forecast results. / (7) yr yf real forecast electr consumptions, respect var(ytraining(t)) varianc real electr consumpt train data. n number element test data set. mean squar error evalu perform model lead misinterpret results. valu predict build order 250 kwh, whereas, instance, sant cugat bar order 20 kwh. hence, decid us mse divid varianc train data set, order avoid problem. nmse criterion commonli evalu criteria. present experi us mean absolut percentag error (mape) offer forecast perform multi-dimension perspective. reason choic mape compar perform differ data sets, rel measure. however, highlight measur base percentag error disadvantag infinit undefin 0 t period interest. mape disadvantag put heavier penalti neg error posit error [36]. mape, describ equat (8), second error measur evalu forecast results. 100 (8) 3.6 experi work divid separ experi describ fig. 8. experi divid stages: fsp model development. aim experi understand model accuraci affect insert new input variables, decid creat experi differ number input variables. fsp studied. experi take account signific histor electr load consumpt valu select fir fsp. second experi includ past valu electr load consumption, binari variabl specifi work day. therefore, second experi input variables. finally, experi includ variabl previou experi plu hour dai variable. shown fig. 8, fsp appli differ depths: 24, 72 24 + 24. experi perform arima consid histor electr load justifi section 2.5. therefore, arima experi account 4 input variables. goal includ experi reader comparison standard statist technique. fig. 7. scatter plot demonstr visual relationship input past electr load consumpt variables, x3.1, x3.2, x3.3 x3.4 output variabl y1, depth 24 + 24 (see tabl 4) 0 2 4 6 8 10 0 2 4 6 8 10 terrassa librari y 1 x3.1 0 2 4 6 8 10 0 2 4 6 8 10 terrassa librari y 1 x3.2 0 2 4 6 8 10 0 2 4 6 8 10 terrassa librari y 1 x3.3 0 2 4 6 8 10 0 2 4 6 8 10 terrassa librari y 1 0 2 4 6 8 10 0 2 4 6 8 10 build c6 y 1 x3.1 0 2 4 6 8 10 0 2 4 6 8 10 build c6 y 1 x3.2 0 2 4 6 8 10 0 2 4 6 8 10 build c6 y 1 x3.3 0 2 4 6 8 10 0 2 4 6 8 10 build c6 y 1 x3.4 0 2 4 6 8 10 0 2 4 6 8 10 sant cugat bar y 1 x3.1 0 2 4 6 8 10 0 2 4 6 8 10 sant cugat bar y 1 x3.2 0 2 4 6 8 10 0 2 4 6 8 10 sant cugat bar y 1 x3.3 0 2 4 6 8 10 0 2 4 6 8 10 sant cugat bar y 1 x3.4 x3.4 fig. 8. scheme experi depth equal 24. scheme appli depth 72 24+24 3.7 model paramet 3.7.1 fir respect fir methodology, paramet associ fsp address previou sections. however, mandatori set complex mask parameter, describ section 2. research complex 9 used, mask higher qualiti mask select past valu electr load consumption. therefore, past consumpt valu select fir taken account model develop work. fuzzif paramet class equal frequenc partit algorithm discret electr load consumpt hour dai variable. work dai variabl binari and, therefore, discret classes. 3.7.2 random forest breiman prove random forest classif regression, gener error converg limit number tree larger [21]. number tree random forest algorithm select 20 trees. fig. 9, shown grow 20 tree good compromis out-of-bag regress error [37] stabilized. paramet directli affect comput cost algorithm. breiman' origin implement random forest algorithm, tree train 2/3 total train data. forest built, tree test (similar leav cross validation) sampl build tree. bag error estim - intern error estim random forest constructed. fig. 9. out-of-bag (oob) error vs. number tree grown random forest differ approach stop criteria. stop node contain n data points. decid set minimum number data point tree leaf 20. thus, split stop tree leaf (node) equal 20 input values. import paramet consid rf algorithm number variabl decis split select random. argument set valu smaller total number input variabl breiman' rf algorithm invok [22]. research, experiment decid set paramet 1/3 number variables, i.e. 2. proven variabl decis split, predict error test data larger. 3.7.3 artifici neural network describ previously, network research layer feed forward network. input connect output middl layer. additionally, work nn us propag train function us jacobian derivatives, concret levenberg-marquardt propag train function. number hidden layer nn model, experiments, conclud substanti improv achiev hidden layer, whilst time build model increas significantly. therefore, paramet remain one. additionally, suitabl number neuron hidden layer select calcul nmse (see equat 6) model 1 30 neurons, select model number neuron best performance. search defin 30 neurons, neuron cost time increas significantli perform improve. 3.7.4 arima paramet experi arima (4,0,1). therefore, result equat paramet determin are: yth1 yth4 import previou consumpt shown tabl 4, eth1 differ previou real consumpt realt-1 predict previou consumpt yt-1. coeffici a0, a1 b0, b1 comput maximum likelihood estim (ml) [38] common method find estim statistics. 4. result tabl 7 show result obtain methodolog differ depth studied: 24, 72 24 + 24, experi differ number input variables, i.e. electr load 0 10 20 30 40 50 60 70 80 90 100 0 50 100 150 200 250 number grown tree o u t- o f- b g r e g s s io n e rr o r past consumpt (4 input variables); past consumpt plu work dai variabl (5 input variables) past consumpt plu work dai hour dai variabl (6 input variables). tabl 7 averag nmse 35 test dai repres entir season year, librari etseiat faculti terrassa, bar etsav sant cugat build c6 barcelona, obtain mean rf, nn fir. terrassa librari depth: 24 depth: 72 depth: 168 (24+24) rf nn fir arima rf nn fir arima rf nn fir arima input variables: 4 averag nmse 0.828 1.283 1.071 0.792 0.826 1.096 0.786 0.690 0.556 0.674 0.396 0.595 averag mape (%) 225.634 265.339 173.128 191.691 204.172 203.783 163.085 187.010 154.873 190.382 55.691 140.376 input variables: 5 averag nmse 0.601 0.380 0.362 0.551 0.478 0.278 0.582 0.521 0.367 averag mape (%) 161.451 95.091 21.690 157.506 100.236 32.107 144.956 78.249 40.781 input variables: 6 averag nmse 0.442 0.590 0.404 0.417 1.442 0.166 0.443 0.495 0.103 averag mape (%) 141.597 170.308 61.536 134.765 60.167 14.811 139.797 88.759 15.867 sant cugat bar depth: 24 depth: 72 depth: 168 (24+24) rf nn fir arima rf nn fir arima rf nn fir arima input variables: 4 averag nmse 0.678 0.705 0.875 0.660 0.701 1.134 0.740 0.562 0.357 0.473 0.609 0.495 averag mape (%) 43.842 98.780 123.615 112.463 46.727 67.796 94.198 131.236 29.139 33.080 95.958 89.224 input variables: 5 averag nmse 0.230 0.261 0.259 0.277 0.408 0.277 0.147 0.160 0.255 averag mape (%) 20.470 22.320 80.556 21.167 22.997 46.626 20.000 90.492 65.934 input variables: 6 averag nmse 0.183 0.134 0.235 0.166 0.169 0.100 0.113 0.127 0.135 averag mape (%) 16.539 24.436 15.278 19.159 31.987 13.950 17.339 36.509 16.013 build c6 depth: 24 depth: 72 depth: 168 (24+24) rf nn fir arima rf nn fir arima rf nn fir arima input variables: 4 averag nmse 0.852 1.003 0.923 0.778 0.791 0.684 0.797 0.800 0.727 1.287 0.738 0.754 averag mape (%) 26.161 26.175 10.373 21.186 25.731 25.344 9.789 19.841 24.786 30.653 8.946 20.064 input variables: 5 averag nmse 0.526 0.661 0.524 0.518 0.805 0.404 0.535 0.747 0.576 averag mape (%) 22.106 21.562 6.710 21.874 26.012 6.136 22.056 26.324 7.565 input variables: 6 averag nmse 0.462 1.230 0.402 0.434 1.313 0.183 0.454 0.941 0.801 averag mape (%) 18.183 36.479 5.525 21.757 39.983 4.499 21.622 30.629 8.720 main reason high error valu appear cell tabl 7 tabl show averag 35 test days. case predict singl dai bad averag error consider increased. exampl predict error distribut shown fig. 10. distribut perform boxplot represent [31]. boxplot represent contain predict error base experiment set previous explained. represent includ experi 5 6 input variables, arima compared, 4 import past consumptions. boxplot contain result 35 test dai 3 differ configur (105 test dai total techniqu arima, contain 35). example, boxplot represent nmse librari terrassa depth 24 aggreg result experi perform terrassa librari 4, 5 6 input variabl depth 24, 35x3 predict errors. fig. 10 includ result terrassa library. however, result insights, highlight later on, similar buildings. fig. 10. nmse distribut techniqu fig. 11 show evolut predict error versu number variabl (left column) versu depth (right column) build studied. notic error shown left hand column averag error obtain aggreg result depth, i.e. 24, 72 24+24. error right hand column averag error obtain aggreg result number variables, i.e. 4, 5 6. 0 1 2 3 4 5 fir rf ann arima methodolog nmse terrassa librari depth 24 e rr o r 0 1 2 3 4 5 6 fir rf ann arima methodolog nmse terrassa librari depth 72 e rr o r 0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 fir rf ann arima methodolog nmse terrassa librari depth 168 e rr o r 0 1 2 3 4 5 6 fir rf ann arima methodolog nmse terrassa librari number input variabl 4 e rr o r fig. 11. left column repres evolut predict error respect number input variabl (averag predict depth 24, 72 24+24) right column repres evolut predict error respect depth (averag predict 4, 5 6 variables) fig. 12 show real hourli electr consumpt build experi differ days. depth number variabl select methodolog select consid graph fig. 11., minimum error achieved. tabl 8 summaris parameters: tabl 8 optim depth number variabl (nov) build base result 35 test dai build rf nn fir arima depth nov depth nov depth nov depth nov terrassa librari 168 6 168 5 168 6 168 4 sant cugat bar 168 6 168 6 168 6 168 4 build c6 168 6 72 5 72 6 168 4 autumn, spring summer dai correspond 23/11/2011, 09/05/2012 18/09/2012 respectively, normal work days, winter dai correspond 19/12/2012, belong weekend day. insight obtain analys result achieved, experi carri research. summar follow points: 1) number input variabl 4, i.e. past valu electr load consumpt used, arima performs, average, slightli better fir, nn rf (left hand column fig. 11) consid nmse evalu criteria. 2) methodolog compar consid nmse (see row averag nmse tabl 7 4 input variabl used), arima techniqu obtain better performance, follow rf, fir nn. arima outperform methodolog 6 9 cases, rf 2 cases, fir nn 1 case each. 3) methodolog compar consid mape (see row averag mape tabl 7 4 input variabl used), fir techniqu obtain better performance, follow rf. fir outperform methodolog 6 9 cases, rf 3 cases. 4) addit inform added, gener fir better perform methodolog (notic 5 6 input variabl arima includ comparison). 5) fir, rf nn compar consid nmse (see row averag nmse tabl 7 5 6 input variabl used), fir techniqu obtain better performance, follow rf nn. fir outperform methodolog 11 18 cases, rf 5 cases, nn 1 case. 6) fir, rf nn compar consid mape (see row averag mape tabl 7 5 6 input variabl used), fir techniqu obtain better performance, follow rf. fir outperform methodolog 15 18 cases, rf 3 cases. 7) predict error methodolog decreas consider variabl work dai ad set input variabl model use. clear left hand plot fig. 10. however, number input variabl increas 6 (includ hour dai variable), error decrease. nn error decreas sant cugat bar, fir rf decreas buildings, number input variabl increas 5. suggest hourli consumpt pattern captur past consumpt variables. thus, cases, sixth variabl remov taken account. 8) furthermore, predict error follow clear pattern depth. however, observ increas depth error tend decrease. average, optim depth valu 24+24 (168) build methodologies. depth, visibl better result (see right hand fig. 11). rf arima methodolog remain stabl chang depth though. 9) distribut predict error fig. 10 show median predict error decreas depth increases. moreover, fir, rf nn lower median arima. however, error predict q3+1.5*ric [31] fir, rf nn. main reason soft comput machin learn techniqu adapt better consumpt chang predict, achiev low predict error (high accuracies). observ low median have. nevertheless, unexpect chang predict fail, error high. arima averag conserv predict accurate, predict error high. 10) general, fir, rf nn methodolog forecast electr load consumption, shown fig. 12. predict follow real shape consumpt curve, winter dai correspond sundai electr consumpt low compar averag consumption. fact build belong academ domain and, therefore, close sundays. notic spain univers librari close sundai consequ crisis. case fir methodolog better performs. 11) unlik soft comput machin learn methodologies, arima perform similar shape electr consumpt curve. natur technique, built- multipl linear regressions. 12) summer test dai shown row fig. 12. methodolog obtain good predict performance, specif dai (18/09/2012) sant cugat bar fir abl obtain good predict (right hand plot summer dai row fig. 12). analys possibl reason low perform methodolog depth (24+24), arriv conclus fir give import 24 past valu week rf nn. hourli consumpt test dai week low fact holydai sant cugat campus. 13) lower predict error build obtain fir, shown tabl 7. 14) clear techniqu obtain better predict others. average, occas fir perform better methodologies. nevertheless, case rf, arima nn better fir, thus, suggest simpl cooper system fit electr load problems. 15) respect comput cost, methodolog fast train model perform (less 10 second train set year hourli data) predict (less 0.5 seconds, achiev intel core2 duo cpu e8400 ram 4gb). contrary, process obtain import past consumpt fir fsp increas exponenti depth. offlin process. result outlin previou point clear soft comput machin learn methodolog chosen research abl obtain good result task hand. think interest work vote strategi deal electr load problems. hand, clear gener term perform fir higher. think intrins characterist fir extract knowledg past inform keep pattern rules, model. fir model synthes trained, non- parametr methodology, speed model phase comparison induct model techniques. import highlight aim work: provid fast reliabl predict techniqu accur forecast hourli consumption. research differ methodolog test focus specif build and/or input variables. however, provid reliabl methodolog perform accur forecast build differ profil avail variabl past valu electr load consumption, inform hour dai work dai not. terrassa librari build c6 sant cugat bar u tu m d y (2 3 /1 1 /2 01 1, w ed n es d ay ) w te r d y (1 9 /0 2 /2 01 2, s u n d y) s p ri n g d y (0 9 /0 5 /2 01 1, w ed n es d ay ) s u m m er d y (1 8 /0 9 /2 0 1 1 , t u es d y ) fig. 12. real energi consumpt valu consumpt predict obtain rf, nn fir methodologies, differ test dai (in season year). y-axi repres consumpt kwh x-axi time dai hours. rf, nn fir model correspond us 6 input variabl depth 24 + 24 hour 5. conclus work differ ai methodologies, i.e. random forest (rf), neural network (nn) fuzzi induct reason (fir), propos perform short-term electr load forecast (24 hours). approach help insid futur smart grid framework provid accur quick predict electr consumpt differ type buildings, allow better distribut plan. order demonstr scalabl model type building, function zone technic univers catalonia experiments. differ profil usag locations, thus, affect differ climatology, consumpt patterns, schedul work days. design experi divid stages: 1) fsp base entropy, common methodolog plu fourth one, arima, help compar tradit time seri forecast statist technique, 2) fir, rf, nn arima model train process. fsp stage, depth studied: 24 hours, 72 hour 24 + 24 hours. model train stage, differ set input variabl studied. aim experi understand model accuraci affect insert new input variabl increas comput cost term time. so, studi predict error versu number import variabl depth past valu fsp performed, point variabl past consumpt depth higher 80 past hours, increas time perform fsp. experi differ number input variabl fsp studi created. experi take account signific histor electr load consumpt valu select fsp. second experi includ past valu electr load consumpt plu binari correspond variabl specifi work day. experi includ previou input variabl plu hour dai variable. base study, fir methodolog perform better forecast follow rf nn. average, occas fir perform better methodologies. however, case rf better fir, thus, suggest vote strategi good approach deal electr load problems. general, ai methodolog adapt better consumpt chang perform predictions, follow real shape curve, detect better peak achiev low predict errors. regard arima, conserv methodolog produc high error accuraci far fir. conclud predict error methodolog decreas consider work dai ad set input variables. average, optim depth valu 24+24 build methodologies. depth, visibl better results. finally, comput cost, methodolog fast order obtain model (less 10 second train set year hourli data) perform prediction. contrary, fsp increas exponenti depth number past valu selected. offlin process perform instanc cloud. futur work aris result journal. instance, perform predict affect granular data, i.e. gather data 1, 5 15 minutes, strategi follow fsp curs dimensionality. deal dai identifi fig. 10 produc high predict error. futur work includ robust predict process fir methodology, deal miss valu reliabl way. least, model embedded, instance, second gener smart meter gener on-sit forecast consumpt and/or product hours, trade excess energi smart meters. european project scanergy5, studi differ energi exchang strategi point smart meter function unlock potenti trade strategies. 5 fp7 framework mari curi industry-academia partnership pathwai (iapp) refer [1] <access july, 2014> [2] in-2010/ <retriev december, 2011> [3] arenas-martnez, m., herrero-lopez, s., sanchez, a., williams, j., roth, p., hofmann, p., zeier, a. (2010). compar studi data storag process architectur smart grid. proceed ieee intern confer smart grid communications, pp. 285-290. [4] catalina, t., virgone, j., blanco, e. (2007). develop valid regress model predict monthli heat demand residenti buildings. energi buildings, vol. 40, pp. 1825-1832. [5] aydinalp, m., ugursal, v. i., fung, a. s. (2002). model appliance, lighting, space- cool energi consumpt residenti sector neural networks, appli energy, vol. 71, pp. 87-110. [6] geoffrei k.f. tso, kelvin k.w. yau. (2007). predict electr energi consumption: comparison regress analysis, decis tree neural networks. energy, vol. 32, pp. 1761-1768 [7] khamis, m.f.i., baharudin, z., hamid, n.h. (2011). electr forecast small scale power artifici neural network. power engin optim confer (peoco) 5th international, pp.54-59. [8] marvuglia, a., messineo, a. (2012). recurr artifici neural network forecast household electr consumption, energi procedia, vol.14, pp. 45-55. [9] tranchita, c., a. torres, a. (2004). soft comput techniqu short term load forecasting. power system confer exposition, vol. 1, pp. 497- 502. [10] caruana, r., niculescu-mizil, a. (2006). empir comparison supervis learn algorithms. proceed 23rd intern confer machin learn (icml2006), pp.161-168. [11] nesreen a. k., amir a. f., neamat, g., hisha, e.h. (2010). empir comparison machin learn model time seri forecasting. econometr reviews, vol. 29, pp. 594-621 [12] [13] tso, g. k.f., yau, k. k.w. (2007). predict electr energi consumption: comparison regress analysis, decis tree neural networks. energy, vol. 32, pp. 1761-1768. [14] hrdle, w., simar, l. (2007). canon correl analysis. appli multivari statist analysis, pp. 321330. [15] abdi. h., williams, l.j. (2010). princip compon analysis. wilei interdisciplinari reviews: comput statistics, vol. 2, pp. 433459. [16] nebot, a., mugica, f., cellier, f., vallverd, m. (2003). model simul central nervou control gener fuzzi models, transact societi model simulation, vol. 79(11), pp. 648-669. [17] law, a.m., kelton, w.d. (1991). simul model analysis, 2nd. ed. mcgraw-hill, new york. pp. 759. [18] acosta, j., nebot, a., villar, p., fuertes, j.m. (2007). optim fuzzi partit induct reason genet algorithms. intern journal system science, 38(12), pp. 991-1011. [19] klir, j.,elias, d. (2002). architectur system problem solving, 2nd. ed., plenum press, new york. [20] escobet, a., nebot, a., cellier, f.e. (2008). visual-fir: tool model identif predict dynam complex systems, simul model practic theory, vol. 16, pp. 76-92. [21] breiman, l. (2001). random forests, machin learning, vol. 45(1), p.p. 5-32. [22] breiman, l. (1996). bag predictors, machin learning, vol. 24 (2), p.p. 123-140. [23] kleinberg, e. (1996). overtraining-resist stochast model method pattern recognition. annal statist vol. 24 (6), pp. 23192349. [24] li, y., wang, s., ding, x. (2010). person-independ head pose estim base random forest regression, 17th ieee intern confer imag process (icip), p.p. 1521 -1524. [25] mcculloch, w., pitts, w. (1943). logic calculu idea imman nervou activity. bulletin mathemat biophysics, vol. 5 (4), pp. 115133. [26] rosenblatt, f. (1958). perceptron: probalist model inform storag organ brain. psycholog review, vol. 65 (6), pp. 386408. [27] alon, i., qi, m. sadowski, r. j. (2001). forecast aggreg retail sales: comparison artifici neural network tradit methods, journal retail consum services, vol. 8, pp. 147- 156. [28] white, h. (1990). connectionist nonparametr regression: multilay feed forward network learn arbitrari mappings. neural networks, vol. 3, pp. 535-549. [29] chow, t.w.s., cho, s.y. (2007). neural network computing: learn algorithm applications, vol. 7, pp. 14-15. [30] box, g., jenkins, g., reinsel, g.c. (2008). time seri analysis: forecast control, 4th edition, pp. 93-102. [31] mcgill, r., tukey, j. w., larsen, w. a. (1978). variat box plots. american statistician, 32 (1), pp. 1216. [32] frigge, m., hoaglin, d. c., iglewicz, b., (1989). implement boxplot. american statistician, 43(1), pp. 5054. doi:10.2307/2685173. jstor 2685173. [33] r: box plot statistics. (2011). r manual. [34] berthold, m., borgelt, c., hppner, f.guide. (2010). data understand - outlier detection. in: intellig data analysis, pp. 63-64. doi: 10.1007/978-1-84882-260-3 [35] weron, r. (2006). factor affect load patterns. case study: deal miss valu outliers. in: model forecast electr load prices. statist approach, pp. 69-70. [36] hyndman, r.j., koehler, a.b. (2006). look measur forecast accuracy. intern journal forecasting, 22, pp. 679-688. [37] li, y., wang, s., ding, x. (2010). person-independ head pose estim base random forest regression. 2010 17th ieee intern confer imag process (icip), pp. 1521 -1524. [38] box, g., jenkins, g., reinsel, g.c. (2008). time seri analysis: forecast control, 4th edition, pp. 404-406.