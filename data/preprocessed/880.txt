intellig servic robot manuscript .
( insert editor ) closed-loop approach track humanoid robot use particl filter depth data *pablo a. martnez  *xiao lin  mario castelan  josep casa  gustavo arechavaleta receiv : date / accept : date abstract humanoid robot introduc instabl bipe march complic process estim posit orient along time .
track humanoid ro- bot may use typic applic navig , task requir benchmark mul- tipl process involv regist measur perform humanoid walk .
small robot repres addit challeng due size me- chanic limit may generat unstabl swing walk .
paper present strategi activ local humanoid robot environ monitor extern devic .
problem face use particl filter method depth imag captur rgb-d sensor order effect track posit orient robot march .
track stage coupl locomot system control step- ping robot toward given orient target .
present integr communic framework track *the first two author contribut equal .
p.-a .
martnez ( b ) m .
castelan  g. arechavaleta robot advanc manufactur group , centro de investigacion de estudio avanzado del ipn , saltillo , coahuila , 25900 , mexico .
e-mail : pablo.martinezglz @ cinvestav.mx m. castelan e-mail : mario.castelan @ cinvestav.mx g. arechavaleta e-mail : garechav @ cinvestav.mx xiao lin  josep casa imag process group , depart signal theori communic , universitat politecnica de catalunya , barcelona , 08034 , spain .
e-mail : xiao.lin @ estudiant.upc.edu josep casa e-mail : josep.ramon.casa @ upc.edu locomot control robot base robot oper system ( ros ) , capabl achiev real time locomot task use nao humanoid robot .
keyword humanoid robot  track  rgb-d sensor  particl filter  ros 1 introduct local classic well studi problem ro- botic .
wide rang sensor devic methodolog use face problem order accur estim robot pose .
local robot crucial step applic robot must interact environ , i.e .
task navig , grasp obstacl avoid .
challeng instanc prob- lem humanoid robot local sinc displac generat by-product complex kinemat structur make contact ground surfac .
well-known locomot behavior impli inaccur odome- tri estim import drift short distanc .
sens , necessari close pose estim mo- tion execut loop incorpor estim process within control scheme .
moreov , humanoid robot design perform human-lik task , bipe locomot human in- teract man-mad environ .
regard , robot predict behavior human per- form self-loc .
predict human mo- tion intent major axi research ro- botic neurosci communiti .
particular prob- lem goal-direct locomot human consist studi under motion pattern shape human trajectori recov .
[ 3 ] , databas hu- man walk trajectori studi , result , control model human locomot suggest base optim 2 pablo a. martnez et al .
control tool .
also , invers optim control formula- tion introduc [ 32 ] [ 30 ] .
[ 4 ] , sta- tistic model human walk report .
common concern work predict human walk- ing path accord spatial goal plane term posit orient coordin .
requir estim humanoid robot posi- tion orient arriv meet point pre- cise bodi orient .
exist sever work human- humanoid interact point import social accept robot motion [ 37 ] .
sens , robot orien- tation meet point maxim safeti vis- ibil criteria .
object improv human comfort posit robot human field view .
context , robot consid servic assist , autonom machin .
thus , social rule proto- col must consid robot move [ 38 ] .
common , intellig room equip sever sensor perceiv move agent , e.g .
human ro- bot .
work , take advantag percept ca- pabil avail scenario cope hu- manoid local problem .
particular , explor idea use extern rgb-d sensor , estim po- sition orient walk humanoid robot per- form locomot task .
sensor cheap pop- ular incorpor close space rela- tive easi manner .
focus studi provid robot local capabl , coupl strategi requir effici accur hu- manoid track tool .
worth mention track humanoid trivial task , state art invest effort use landmark robot scenario , gather previous knowledg world 3d map constrain motion robot upper articul , sinc problem local main caus robot walk .
also consid accuraci level centimet must achiev task perform reduc space .
motiv reason , paper use rgb- sensor estim posit orient hu- manoid robot .
sensor locat ceil top-down field view .
estim process base particl filter natur coupl humanoid loco- motion control accur reach meet point given predefin posit orient plane .
main contribut articl :  depth-bas tracker abl accur follow locomot behavior humanoid robot .
 control scheme consid reach target posi- tion orient updat linear angular veloc accord current local humanoid robot .
 ros communic framework link depth tracker humanoid locomot .
paper organ follow : section 2 present review relat work ; section 3 describ prob- lem track local humanoid robot use depth data rgb-d sensor particl filter imple- mentat face problem ; section 4 describ control scheme incorpor estim robot pose within activ local approach develop ros integra- tion framework ; experiment result provid section 5 ; final conclud remark futur work present section 6 .
2 relat work section divid two part .
first part present work relat humanoid robot local , emphas applic use intern well extern sensor track locomot robot .
second part describ relev work relat track human context smart room .
2.1 humanoid robot local walk process leg humanoid robot general produc noisi motion due effect bipe loco- motion .
exampl , situat joint backlash foot slip floor generat inaccur execut motion task .
consequ , import keep robot local environ .
order face problem , visual sensor most use main sourc input data track system .
track mo- tion robot , sensor mount insid hu- manoid .
one reason use built-in camera rang sensor weight constraint relat limit pay- load humanoid robot .
altern , sensor may adapt onto humanoid extern sourc order extend sens capabl integr system need .
2.1.1 built-in sensor problem estim humanoid robot pose vi- sual data face appli differ approach .
one extend kalman filter ( ekf ) , allow integr multipl sensor .
[ 40 ] ekf pro- pose data propriocept sensor walk- ing pattern generat fuse vision system or- der obtain robot motion estim .
method success appli human-s hrp-2 robot slam methodolog abl build map spars 3d closed-loop approach track humanoid robot use particl filter depth data 3 point local robot indoor environ [ 9 ] .
ekf methodolog also test use small- size humanoid robot .
exampl , [ 29 ] , ekf predic- tion step perform relat torso joint veloci- tie nao robot differenti kinemat .
end , visual data process use parallel track map ( ptam ) approach [ 19 ] emul 3d visual sensor .
ekf correct step [ 29 ] consid fuse provid camera pose data iner- tial unit measur mount chest robot .
recent , novel visual-bas local approach use bundl adjust [ 42 ] hrp-2 humanoid robot present [ 2 ] .
later , monocular local framework [ 1 ] propos predict visibl 3d point previous built spars 3d map use stereo visual slam .
common featur approach includ inform local robot order perform locomot task , i.e. , instantan posit orient robot consid within control modul reach specif goal .
although filter-bas approach allow integr multipl sensor , visual inform ( featur , cue , etc . )
becom core method accur odometri requir .
sens , filter base approach reli ro- bust visual-bas local system order maintain success track humanoid robot .
current , ptam prove one reliabl visual-bas lo- calize system enough cue avail .
integr activ local method con- trol locomot humanoid robot [ 21,22 ] .
therebi , possibl guid trajectori robot surround- ing object interest order estim geometri monocular video sequenc acquir robot walk [ 22 ] .
furthermor , method control march robot toward direct favor visual base local present [ 21 ] .
, set sta- tistic criteria use analysi 3d map reproject 2d point target robot toward direc- tion rich visual inform .
unfortun , ptam work accur , system requir initi step sensit physic distanc first two imag captur monocular camera .
monte-carlo techniqu also test nao platform fuse data laser scanner , iner- tial measur unit joint encod order esti- mate robot pose [ 18 ] .
approach later im- prove includ new observ model base visual data monocular camera [ 28 ] .
depth sensor also consid , instanc , [ 20 ] rgb-d sensor mount head humanoid robot order solv 6d torso pose .
, observ model abl integr depth data .
propos ap- proach test extens real-world environ , includ climb stair , monocular-bas observ model appli order increas localiza- tion accuraci .
work inspir octre repre- sentat [ 43 ] , allow success construct dynam map real-tim collision-fre path plan task .
howev , requir accur initi static world , consequ , previous process dens 3d scan model navig space be- come essenti .
recent filter modal success in- tegrat depth data either reduc drift humanoid local process [ 11 ] enlarg region robot abl local [ 6 ] .
techniqu focus object-cent local obstacl avoid .
exampl , [ 5 ] , laser scanner mount hip robot order construct height map represent environ .
represent provid grid help fit plane identifi obstacl use height infor- mation contain cell grid .
also , [ 24 ] , gpu implement model-bas approach propos track 6d pose object order local cam- era mount head hrp-2 robot .
end , dimens object need known order success local robot perform requir task .
2.1.2 extern sensor navig system use extern sensor track small size humanoid robot pose present [ 15 ] .
, 3d featur virtual visual servo ( vvs ) [ 8 ] suc- cess integr .
rgb-d sensor use exter- nal devic get depth featur combin imag featur render cad model robot .
pose estim process base differ render real imag featur .
although approach may appli varieti robot platform , method struggl accur estim posit orient robot rang outsid 10 cm 10 re- spectiv .
[ 25 ] , calibr arrang retro-reflect marker place head hrp-2 robot or- der facilit problem multi-camera track .
aim approach continu solv ex- trinsic paramet camera robot order generat reconstruct environ .
recon- struction divid floor obstacl .
plane floor increment updat walk robot obstacl segment base color .
path planner oper level foot- step use autonom navig task .
later , retro-reflect marker also incorpor track- ing object scene .
method name naviga- 4 pablo a. martnez et al .
tion among movabl obstacl ( namo ) [ 41 ] .
app- roach provid accur methodolog recov full pose robot real time cost care calibrat- ing retro-reflect landmark along robot scene .
2.2 track human smart room visual-bas human track state process de- tect track human bodi sequenc im- age .
process challeng due larg variat human appear motion , well chang camera viewpoint .
estim whole bodi pose time also consid , problem scale track human motion analysi .
taxonomi human motion present [ 31 ] , two main approach introduc : model-bas model-fre .
model base approach use predefin human bodi model pose estim [ 35 ] .
, pro- cess consist model ( construct likelihood func- tion ) estim ( find like pose given likelihood surfac ) .
second approach establish di- rect relat imag observ pose , sinc priori human bodi model avail .
human motion analysi could consid spe- cific applic real time object track .
[ 45 ] suit- abl categor track method present describ step build object tracker .
visual human track approach classifi three categori accord differ type data use : color , depth fusion .
color base track method common follow framework .
foreground appear model color textur inform , foreground model match success frame order find correspon- denc .
exampl , [ 7 ] object localiza- tion formul gradient optim problem use color histogram regular spatial mask isotrop kernel , [ 27 ] adapt color-bas parti- cle filter use .
model reliabl enough situat like sudden illumin chang unex- pect occlus , usual happen real time track- ing .
advantag rgb-d consum depth sensor microsoft kinect asus xtion provid afford way acquir depth inform good resolut low cost .
foster present depth depth color-bas real time track method last year .
intuit way exploit depth inform perform track direct depth imag , take ad- vantag shape cue given depth valu .
exampl , histogram orient depth ( hod ) success- fulli appli human track [ 39 ] , perform his- togram orient gradient ( hog ) -like method depth data .
hod local encod direct depth chang shape featur make model robust illumi- nation issu .
background model also use approach depth data avail .
hansen et al .
[ 16 ] propos build background model joint distri- bution depth intens inform , accommo- date chang domain .
, cluster pixel sig- nific differ background model track expect maxim ( em ) algorithm .
[ 44 ] , depth data use human track .
, mean chamfer distanc , binari head-shap templat match edg map extract depth array .
head locat , whole bodi contour extract separ background track achiev use motion person .
way deal depth data reconstruct 3d scene perform track 3d .
work scope usual focus complic problem skeleton track [ 12,13 ] .
advantag 3d track data use measur real world met- ric , facilit paramet set track system .
unfortun , due higher complex deal 3d data , method often requir gpu implemen- tation order run real time .
track human use depth sensor bird-ey view present [ 34 ] [ 26 ] .
approach pre- sent [ 34 ] reli background model foreground/background segment , base featur descriptor maxim detect discrimi- nativ train head-should classifi .
moreov , ap- proach propos [ 26 ] use particl filter implement depth data human track .
main applic analyz behavior costum ( human walk ) buy activ within shelv , simul instal depth sensor ceil supermarket .
therefor , propos model con- sider upper part bodi ( head , shoulder arm ) separ two : one 2d model , repres head shoulder , estim person local one 3d model determin arm motion fit geometr primit ( cylind arm fore- arm , ellipt cylind torso rectangular plane hand ) .
3 rgb-d tracking-loc command humanoid robot move reach target point may lead inaccuraci .
usual occur due fact control know possibl drift actual step robot .
order address prob- lem , propos scheme robot navig closed-loop approach track humanoid robot use particl filter depth data 5 fig .
1 : exampl appli propos rgb-d tracking- local approach .
point cloud extract robot model project point xy-plan ellips fit .
extern depth sensor obtain data track .
rgb-d sensor provid depth map real world dis- tanc visibl humanoid surfac sensor pixel imag , make possibl par- tialli reconstruct 3d point cloud scene , en- rich inform exploit track- ing process .
also benefici estim orient , sharper object boundari provid depth map comparison color imag .
main task tracker estim posit orient robot analyz point cloud frame , publish real time commu- nicat system [ 33 ] , control subscrib inform , adjust movement robot accord- ing reach target higher accuraci .
3.1 particl filter implement track method use paper base particl filter .
zenith rgb-d sensor use captur depth data track robot top view scene .
section , propos robot track system de- scribe .
initi posit orient provid user help graphic interfac choos data current rgb imag ob- serv scenario .
therefor , particl filter manual ini- tializ origin posit orient robot .
, tracker run particl filter process or- der estim posit robot .
posit obtain , region robot separ background around estim posit depth imag .
final , orient estim base ex- tract region use ellips fit shown figur 1 .
3.1.1 posit like particl filter algorithm , recurs approx- imat posterior probabl densiti function p ( xt |yt ) current state model xt evalu likelihood z th h ld x z fig .
2 : robot model .
robot model design combi- nation cuboid cylind .
observ yt accord set weight parti- cles { xit , w } .
xit stand sampl point state space i-th particl time wit associ weight .
particl repres random sampl propag prior probabl densiti last ap- proxim time  1 dynam model .
whole process basic consist four step .
 resampl : n particl { xit , w }  p ( xt |yt ) last iter time resampl base resam- pling strategi order make sure resampl par- ticl { xit  ,1/n } get distribut reason way .
resampl strategi method sampl import resampl [ 14 ] ( sir ) , mean particl select accord weight .
parti- cles larg weight duplic , low weight particl probabl delet keep total number particl unchang .
 propag : resampl particl propag generat new set particl { xit+1 , w t+1 }  p ( xt+1|yt ) base dynam model p ( xt+1|xt ) , describ system chang time .
method , gaussian function use .
 weight : order approxim true posterior distribut use discret particl , need weight likelihood function repres correspond model new obser- vation .
weight normal sum equal 1 .
approach , defin ob- servat number point , count within t degre rotat robot model center posit particl 3d space , t esti- mate orient last iter .
robot model design combin cuboid cylind show figur 2 .
figur 1 show point cloud robot captur top view , head , hand shoulder visibl part .
geometr model ( figur 2 ) em- ploy match point cloud shape 3d space .
therefor , observ , point 6 pablo a. martnez et al .
z-coordin higher z-threshold fit cylind model , repres point cloud robot head .
point z- coordin lower z-threshold fit cuboid area , repres point cloud shoulder hand .
weight observ comput count number point cor- rect fit geometr model .
model robot give cue shape robot , make robust perspect chang robot move .
likelihood function defin equat ( 1 ) , yt denot observ qi proba- biliti mass associ i-th particl qi = p ( yt |xit  )  n i=1 p ( yt |x  ) , ( 1 ) weight particl equal likelihood : wit+1 = q ( 2 )  estim : estim result obtain perform weight averag particl { xit+1 , w t+1 }  p ( xt+1|yt+1 ) : xt+1 = n  i=1 wit+1 x t+1 ( 3 ) 3.1.2 orient orient robot design estim sep- arat previous step purpos reduc dimens state space increas compu- tation speed track system .
speed chang orient small enough estim direct target region extract ellips fit process without strong affect overal track accuraci .
weight summat locat parti- cles show estim posit xt+1 obtain previ- ous step .
larger window compar observ window ( geometr model ) use locat estima- tion process chosen extract point cloud robot center estim posit .
extract point cloud project xy-plan , rough repres shape robot top view .
princip compon analysi ( pca ) employ estim direct largest data variat among project 2d point .
direct treat major axi ellips minor axi ellips perpendicular major axi indic estim orient .
besid , assum orient robot chang continu time mean estim orient t time data : local xre fcom current time k , orient  fc current time k , target posit xt , target orient t .
result : refer linear veloc xre fcom time k+1 , refer angular veloc  fc time k+1 .
xre fcom outsid stop region xre fcom =x ( x f comxt )  f c = (  f c t ) appli wpg given ( xre fcom ,  f c ) generat locomot invers kinemat end algorithm 1 : robot perform locomot task reach target posit orient .
within interv [ t1h , t1 +h ] h repres threshold maxim orient chang time slot .
worth mention fit ellips ex- plore track posit head walk hu- man multipl sensor environ , camera laser rang finder combin .
work , present [ 23 ] also benefit use particl filter track motion human .
far filter kalman concern , linear system gaussian nois , kalman filter op- timal .
system nonlinear , kalman filter use state estim , particl filter may give better result price addit comput effort .
system non-gaussian nois , kalman filter optim linear filter , particl filter may perform better [ 36 ] .
situat , sinc nois track process non-gaussian , main come biped walk , reason follow par- ticl filter framework standard kalman filter .
4 locomot control local robot comput rgb-d tracker , task reach target posit specif orient may formul locomot framework .
task , propos locomot control direct next posit orient robot lie along path minim distanc current local given target term posit orient .
let xre fcom = [ xw , yw ] refer posit center mass ( com ) xy-plan  fc orien- tation angl , provid tracker describ sec- tion 3 .
current state robot defin pair ( xre fcom ,  f c ) given target state defin ( xt , t ) .
refer linear veloc com , xre fcom com- pute consid proport control base dis- tanc current estim robot  com po- closed-loop approach track humanoid robot use particl filter depth data 7 local   ,   target  ,  locomotiontrack fig .
3 : ros framework .
follow ros program paradigm , tracker locomot control code node ( elips ) common topic share local target ( rectangl ) .
sition comput target posit .
likewis , refer angular veloc ,  fc , differ current target orient use .
therefor , error ex = x f comxt e =  f c t regul impos exponenti converg ex =xex e = e , x  constant proport gain .
pro- cedur perform robot reach end trajectori formal describ algorithm 1 .
input walk pattern generat ( wpg ) given xre fcom output consid dynam sta- ble trajectori com , posit foot contact next footstep placement .
wpg solv quadrat program predefin time horizon propos [ 17 ] .
case , refer orient  fc use express inequ constraint defin admis- sibl region place next footstep .
comput joint trajectori robot wpg outcom base real-tim invers kinemat method suggest [ 10 ] .
4.1 ros integr framework order provid integr experiment framework , previous explain tracker locomot approach integr use robot oper system [ 33 ] .
platform conveni communic differ system requir .
case , rgb-d cam- era serv main sensor tracker system , physic actuat humanoid robot direct af- fect locomot control system .
ros platform fig .
4 : ground truth mark .
three point label color imag black point p1 ( x1 , y1 ) repres posi- tion robot , vector p3-p2 stand orient imag .
also thought program tool help in- tegrat sensor actuat work separ re- quir communic protocol interact function in- tegral .
achiev requir communic , ros orga- nize protocol use node , messag topic .
figur 3 depict messag strategi design com- munic tracker locomot system ex- periment applic .
figur , tracker loco- motion system shown within elips repres two node .
purpos node carri main process system , i.e .
tracker node estim posit orient robot current time locomot node determin immedi linear angular veloc need appli control robot order get closer target state .
far two topic system concern , depict rectangl refer lo- calize target topic .
function topic regard receiv messag publish differ node system .
local topic receiv current state robot publish tracker node target topic receiv target local current task .
note , although target state remain fix singl experi , tracker node publish valu manual select graphic inter- face applic .
final , arrow appear figur 3 repres messag pass node topic .
regard , worth mention tracker node aim publish messag onto local target topic , locomot node subscrib topic , i.e .
read everi messag publish topic tracker node .
8 pablo a. martnez et al .
2.6 2.8 3 3.2 3.4 1.6 1.7 1.8 1.9 2 2.1 2.2 2.3 2.4 rout 1 ( depth base ) 3 4 1 5 2 2.6 2.8 3 3.2 3.4 3.6 1.7 1.8 1.9 2 2.1 2.2 2.3 2.4 2.5 2.6 rout 2 ( depth base ) 3 4 1 5 2 2 2.2 2.4 2.6 2.8 3 3.2 2 2.2 2.4 2.6 2.8 rout 3 ( depth base ) 3 4 1 5 2 2.6 2.8 3 3.2 3.4 1.6 1.7 1.8 1.9 2 2.1 2.2 2.3 2.4 rout 1 ( color base ) 3 4 1 5 2 2.6 2.8 3 3.2 3.4 3.6 1.7 1.8 1.9 2 2.1 2.2 2.3 2.4 2.5 2.6 rout 2 ( color base ) 1 23 4 5 2 2.2 2.4 2.6 2.8 3 3.2 2 2.2 2.4 2.6 2.8 rout 3 ( color base ) 3 4 1 5 2 fig .
5 : track result .
three rout shown column-wis .
rout perform twice , consid depth ( top ) color ( bottom ) inform .
ground truth appear thick black line track trajectori appear gray .
number diagram indic locat robot visit , start locat 1 stop locat 5 .
control consid experi , robot reach desir place accuraci .
5 result section present experiment evalu ap- proach appli sever navig task perform humanoid robot .
first experi relat track motion humanoid robot , i.e. , close loop consid .
main idea under ex- periment assess perform particl filter either depth color chosen drive filter .
princip conclus experi depth inform great outperform color .
reason , second experi includ evalu propos control scheme consid depth-bas particl fil- ter .
5.1 record ground-truth label ground truth posit orient robot along trajectori purpos quantita- tive verif accuraci tracker navi- gation system .
sinc experi perform real time , color depth imag use mark ground truth captur everi specif number frame track process , order avoid potenti interfer realtim track control system .
specif , figur 4 show , three point label color imag black point p1 ( x1 , y1 ) repres po- sition robot , vector p3-p2 stand orien- tation imag .
point label color imag , depth valu obtain correspond depth imag .
data transform world coordi- nate accord camera calibr paramet , re- sult actual posit orient robot world refer frame .
note , first experi use minim separ forti frame video sequenc keep mark task manag .
respect second experi minim separ six frame use .
track control system approxim respons four publish messag ( local- izat ) per second .
also , imag record process take time could affect system rate , reason imag save .
5.2 experi 1 : track aim experi explor benefit us- ing depth inform color inform particl filter .
end , compar three similar rout robot command visit five differ locat .
note close loop consid experi , therefor correct error-to-target observ dur- ing march robot .
figur 5 present graphic result track , ground truth depict thick black result track trajectori shown light gray .
visual inspect figur reveal closed-loop approach track humanoid robot use particl filter depth data 9 0 0.05 0.1 0.15 0.2 p os iti e rr ( et er ) 1 2 3 4 5 6 depth color rout 1 rout 3 rout 3 rout 2 rout 1 rout 2 fig .
6 : posit error .
figur show error posit three rout experi 1 .
note depth inform signific outperform color inform .
depth inform suitabl success par- ticl filter track .
explan generat particl color-bas tracker weight compar color histogram observ particl sourc color histogram target obtain first frame .
color histogram contain geometr infor- mation robot , make less robust per- spectiv chang geometr model exploit depth-bas tracker .
instanc , color base tracker prefer track visibl part robot , may coincid correct locat .
besid , parti- cle weight method use depth-bas tracker con- sist simpli count number point fit model , mean lower complex comput color histogram particl color-bas method .
result support quantit result shown figur 6 .
statist analysi obtain data present use box plot .
box , cen- tral mark median , edg box 25th 75th percentil , whisker extend ex- treme data point consid outlier , outlier plot individu .
figur show depth-bas case perform better term minim error ( smaller 0.05 ) repeat result .
far error orient concern , great differ exhibit depth color base trials.th mean error 4.6 standard deviat 3.8 , mean big major robot state track accuraci 10 orient .
5.3 experi 2 : track control experi test effect depth-bas tracker propos control scheme .
experi divid three main navig task relat final posit reach robot , i.e. , sens robot march fig .
7 : experiment set ( posit orient ) .
initi posit three final posit robot shown top .
target posit 1 away initi posit .
forward , diag- onal horizont sens observ experi .
five differ orient three final posit robot reach experi shown bottom , rang 90 90 .
perform forward , horizont diagon mode w.r.t .
initi posit .
figur 7 depict three posit set- ting .
direct path follow label p1 , p2 p3 , respect forward , horizont diagon path .
experi , distanc initi final posit 1 m. provid accur posit robot along lo- comot relev featur robust tracker .
current orient need also estim order provid locomot control enough inform command robot challeng task .
sens , set five final orient incorpor three target posit describ , total fifteen experi ( 3 final posit  5 final orienta- tion ) .
import note initi orient experi 0 , i.e. , robot start posit alway face toward forward direct , shown figur 7 ( top ) .
figur 7 ( bottom ) , five differ orien- tation requir target status shown , rang 90 90 .
system test use kinect rbg- sensor nao humanoid robot .
process ran local network form one server instal smart room ( 2.8ghz , 4gb ram ) , laptop ( 2.53ghz , 4gb ram ) aldebaran r nao v4 robot ( 1.6ghz , 1gb ram ) ) approxim respons 4 publish messag per second .
10 pablo a. martnez et al .
1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6 1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 xaxi ( meter ) y ax ( et er ) ( ) target orient 90 .
1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6 1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 xaxi ( meter ) y ax ( et er ) ( b ) target orient 45 .
1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6 1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 xaxi ( meter ) y ax ( et er ) ( c ) target orient 0 .
1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6 1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 xaxi ( meter ) y ax ( et er ) ( ) target orient 45 .
1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6 1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 xaxi ( meter ) y ax ( et er ) ( e ) target orient 90 .
fig .
8 : qualit result ( posit ) .
perform approach term posit shown figur .
blue line depict orient estim tracker red line repres polynomi curv fit ground truth posit ( mark black circl ) .
black-edg rectangl repres initi final posit robot , green-edg rectangl depict target posit .
small black arrow show respect orient ( measur w.r.t .
x-axi ) 5.3.1 stop criterion order stop march robot target reach , consid euclidean distanc stop con- dition least 5 cm target .
criterion base overlap area bound box robot ideal bound box robot center target .
note , robot reach tar- closed-loop approach track humanoid robot use particl filter depth data 11 20 40 60 80 100 120 90 45 0 45 90 frame number r e n n ( e g ) ( ) p1 - tgt .
.
90 .
20 40 60 80 100 120 90 45 0 45 90 frame number r e n n ( e g ) ( b ) p1 - tgt .
.
45 .
20 40 60 80 100 120 90 45 0 45 90 frame number r e n n ( e g ) ( c ) p1 - tgt .
.
0 .
50 100 150 200 90 45 0 45 90 frame number r e n n ( e g ) ( ) p1 - tgt .
.
45 .
50 100 150 90 45 0 45 90 frame number r e n n ( e g ) ( e ) p1 - tgt .
.
90 .
20 40 60 80 100 120 90 45 0 45 90 frame number r e n n ( e g ) ( f ) p2 - tgt .
.
90 .
20 40 60 80 100 120 90 45 0 45 90 frame number r e n n ( e g ) ( g ) p2 - tgt .
.
45 .
20 40 60 80 100 120 90 45 0 45 90 frame number r e n n ( e g ) ( h ) p2 - tgt .
.
0 .
20 40 60 80 100 90 45 0 45 90 frame number r e n n ( e g ) ( ) p2 - tgt .
.
45 .
20 40 60 80 100 120 90 45 0 45 90 frame number r e n n ( e g ) ( j ) p2 - tgt .
.
90 .
20 40 60 80 100 120 90 45 0 45 90 frame number r e n n ( e g ) ( k ) p3 - tgt .
.
90 .
20 40 60 80 100 120 90 45 0 45 90 frame number r e n n ( e g ) ( l ) p3 - tgt .
.
45 .
20 40 60 80 100 120 90 45 0 45 90 frame number r e n n ( e g ) ( ) p3 - tgt .
.
0 .
20 40 60 80 100 120 90 45 0 45 90 frame number r e n n ( e g ) ( n ) p3 - tgt .
.
45 .
50 100 150 200 250 90 45 0 45 90 frame number r e n n ( e g ) ( ) p3 - tgt .
.
90 .
fig .
9 : qualit result ( orient ) .
perform approach term orient shown .
blue line depict orient estim tracker red line repres polynomi curv fit ground truth posit ( mark black circl ) .
get , appli veloc becom neglig produc walking-in-plac motion .
consequ , nois in- duce sensor lectur tracker node .
reason , stop orient criterion 10 chosen base suppos result drift 10 cm , would caus propag posit error due diverg orient , i.e , without control correct er- ror .
5.4 qualit result start discuss result regard accuraci tracker estim posit robot .
end , figur 8 depict plot show aerial view fifteen differ experi perform robot .
figur divid five diagram .
diagram present three main path : forward , diagon horizont , fol- low robot order reach target posit .
diagram show result relat singl target orienta- tion , i.e. , diagram ( b ) three main path regard 12 pablo a. martnez et al .
0 0.02 0.04 0.06 0.08 0.1 0.12 0.14 0.16 90 45 0 45 90 final orient ( deg ) p os iti e rr ( et er ) ( ) posit error p1 .
0 0.02 0.04 0.06 0.08 0.1 0.12 0.14 0.16 90 45 0 45 90 final orient ( deg ) p os iti e rr ( et er ) ( b ) posit error p2 .
0 0.02 0.04 0.06 0.08 0.1 0.12 0.14 0.16 90 45 0 45 90 final orient ( deg ) p os iti e rr ( et er ) ( c ) posit error p3 .
fig .
10 : statist analysi posit error .
statist analysi posit data shown imag .
diagram show posit error meter relat singl target posit ( p1 ( ) , p2 ( b ) p3 ( c ) ) combin five final orient .
final orient 45 present , diagram ( ) depict relat final orient 45 .
diagram , trajectori follow humanoid robot estim tracker system color blue .
com- parison , ground truth posit ( depict black cir- cles ) fit polynomi curv ( red ) .
initi final posit depict black-edg rectangl target posit shown green .
respect orient associ rectangl ( measur w.r.t .
x-axi ) repres black arrow .
decid use interpol method order relax manual ground- truth mark frame video .
sake obtain error calcul includ video frame correspond sampl ground- truth index , use linear interpol .
although strategi necessarili accur seem repres departur track state general tendenc mark ground-truth .
sever featur note figur 8 .
first , experi , final track posit appear close target , consid 5 cm stop condit .
comparison estim trajectori ground truth ( blue red line respect ) show ac- curaci tracker system .
import notic trajectori natur swing motion small size humanoid robot fulli recov .
anoth rele- vant featur note figur effect final orient shape track trajectori , exam- ple , visual analysi five horizont path reveal im- portant differ step requir achiev final orient , well sens direct humanoid incorpor march toward final goal .
follow discuss , estim robot ori- entat shown , experi , figur 9 .
figur organ three row five column , corre- spond three target posit five final ori- entat , respect .
diagram , blue line rep- resent robot orient estim tracker system ground truth mark black circl .
red line repres polynomi curv fit ground truth observ .
notic experi perform well term node system i.e .
tracker humanoid robot control interact coher .
appreci along gradual chang ini- tial orient desir orient reach .
note also experi number frame requir reach posit orient target be- tween 110 120 .
nonetheless , three ( ) , ( f ) ( ) took 150 frame .
explain consequ proport gain relat control- ling posit robot .
i.e. , 5 cm stop condi- tion may easili reach proport gain consider decreas consequ proxim error target posit .
methodolog , howev , coupl control paradigm consid sophist converg .
worth comment path p2 ( g ) , 45 seem challeng final orient .
lo- comot control caus robot close target posit yet struggl reach target orient ful- fill stop criteria quick .
reason , greater number frame ( near target posit ) robot appear walk almost place ( minim displac due small linear veloc ) , caus tracker perform less accur case .
5.5 quantit result order measur quantit perform pro- pose approach , comput euclidean error valu estim tracker polynomi curv fit ground truth observ .
data correspond- closed-loop approach track humanoid robot use particl filter depth data 13 0 2 4 6 8 10 12 14 16 18 20 p1 p2 p3 rie nt io n er ro r ( de g ) ( ) orient error 90 .
0 2 4 6 8 10 12 14 16 18 20 p1 p2 p3 rie nt io n er ro r ( de g ) ( b ) orient error 45 .
0 2 4 6 8 10 12 14 16 18 20 p1 p2 p3 rie nt io n er ro r ( de g ) ( c ) orient error 0 .
0 2 4 6 8 10 12 14 16 18 20 p1 p2 p3 rie nt io n er ro r ( de g ) ( ) orient error 45 .
0 2 4 6 8 10 12 14 16 18 20 p1 p2 p3 rie nt io n er ro r ( de g ) ( e ) orient error 90 .
fig .
11 : statist analysi orient error .
statist analysi posit data shown imag .
diagram show orient error degre relat singl final orient ( 90 ( ) , 45 ( b ) , 0 ( c ) , 45 ( ) , 90 ( e ) ) combin three final posit .
ing error posit shown box plot figur 10 quantit error orient depict fig- ure 11 .
figur 10 organ three diagram , show posit error ( meter ) relat singl target posit combin five final orient , i.e .
diagram ( ) show five final orient relat forward path ( p1 ) .
similar way , figur 11 depict five diagram repres five orient combin three final posit , case , orient er- ror shown degre .
let us start discuss figur 10 , observ posit error trajectori follow robot .
except outlier , record error less 6 cm experi , therebi support accuraci track respect posit .
note also presenc outlier general compromis accur perform system , greater 10 cm .
far figur 11 concern , orient error less 10 experi , exclud outlier .
import notic track orient small size humanoid robot challeng problem , compar instanc wheel robot consid sys- tem configur , i.e .
top view camera-sensor .
may explain outcom swing motion gen- erat biped walk small humanoid , produc great nois data acquir sensor .
5.6 discuss result present section correspond track system reli fit geometr primit order determin , real time , posit orient walk humanoid robot .
mean fit model pro- pose section 3 accord physic dimens robot .
sens , fit ellips , method- olog use humanoid robot present elong distribut along shoulder .
although case humanoid , robot atlas boston dynam , carri batteri box back , may depart ellipt elong , therefor requir fit differ geometr primit .
depth-bas track approach propos pa- per employ simpl yet generic geometr model particl filter process track humanoid object scene .
compar target model cad model , simpl geometr model strong reduc comput complex weight particl gen- erat frame intuit count number 14 pablo a. martnez et al .
point fit model .
also , perform keep modul generic enough track humanoid ob- ject differ size appear multi- object track task .
reason choos zenith depth camera extern camera track system less occlus perspect chang involv top view .
geometr model use approach exploit shape humanoid object top view track process suitabl improv robust partial occlus .
orient estim sen- sitiv occlus sinc ellips fit method high reli complet point cloud data .
never- theless , address introduc tempor con- sistenc orient estim process .
particular , implement smooth estim orient along time target orient chang great consecut frame .
far track method concern , de- cide focus sole approach due natur track problem approach state art , i.e. , track walk complet viabl method due follow constraint : ( ) emphasi track joint articul rather static robot , ( b ) evid failur departur initi ref- erenc orient occur , ( c ) reli numer land- mark along humanoid bodi , head along sce- nario , ( ) previous acquir 3d model world , ( e ) failur poor textur scenario ( wooden mo- saic floor ) , ( f ) use one extern sensor .
worth comment sever aspect relat approach .
although includ one robot scene , propos depth-bas track abil cope humanoid object scene , sinc generic geometr model employ approach consid- er general shape humanoid object point cloud top view .
howev , direct vision camera robot interrupt part interrupt , track perform affect .
case , smaller amount generat high weight observ ( par- ticl ) , sinc target data provid frame miss- ing .
worst case tracker take wrong data observ , i.e .
take occlud target , common problem color-bas track approa- ches .
howev , propos depth-bas particl filter robust occlus extend .
approach , depth inform geometr model would help system distinguish occlud tar- get observ depth-bas tracker co- incid real situat rather observ in- correct data .
manner , particl distribut target occlud better protect along occlud frame .
final , author believ low cost rgb- sensor make methodolog appropri instal monitor system humanoid close space , human-robot interact hous environ need .
also , combin capabl extern sensor base track system intern sensor camera humanoid robot would increas local ca- pabil robot depend requir task , i.e. , walk toward target could perform ex- ternal sensor grasp , manipul target could achiev intern mount sensor .
6 conclus framework face activ local track humanoid robot present .
use particl filter depth inform obtain rgb-d sensor humanoid robot pose ( posit orient ) esti- mate .
activ featur local carri incorpor pose robot locomot con- trol .
integr communic system achiev use ros , facilit appli propos frame- work navig task .
approach test use kinect nao humanoid robot promis result .
geometr model use approach exploit shape humanoid object top view track process suitabl improv robust partial occlus .
orient estim sen- sitiv occlus sinc ellips fit method high reli complet point cloud data .
never- theless , address introduc tempor con- sistenc orient estim process .
particular , implement smooth estim orient along time target orient chang great consecut frame .
worth comment impact framework field human-robot interact , i.e. , term ac- curat local robot take decis real time navig room human ap- proach .
first , track method may complement ap- plicabl plan algorithm human obsta- cles appear .
second , scheme could easili incorpo- rate within human track approach order increas rang possibl interact robot hu- man .
idea consid extens scope describ paper .
acknowledg work partial develop framework project tec2013-43935-r , financ span- ish ministerio de economa competitividad european re- gional develop fund ( erdf ) .
also , author would like thank mexican council scienc technolog ( conacyt ) phd studentship pablo a. martnez financi support sabbat leav mario castelan .
closed-loop approach track humanoid robot use particl filter depth data 15 refer 1 .
alcantarilla , p. , ni , k. , bergasa , l. , dellaert , f. : visibl learn largescal urban environ .
: ieee intern confer- enc robot autom .
shanghai , china ( 2011 ) 2 .
alcantarilla , p.f. , stass , o. , druon , s. , bergasa , l.m. , dellaert , f. : local humanoid singl camera ?
autonom robot 38 ( 1-2 ) , 4771 ( 2013 ) 3 .
arechavaleta , g. , laumond , j.p. , hicheur , h. , berthoz , a. : op- timal principl govern human walk .
ieee transact robot 24 ( 1 ) ( 2008 ) 4 .
castelan , m. , arechavaleta , g. : approxim reachabl space human walk path : low dimension linear approach .
: ieee intern confer humanoid robot , pp .
81 86 .
pari , franc ( 2009 ) 5 .
chestnutt , j. , takaoka , y. , suga , k. , nishiwaki , k. , kuffner , j. , kagami , s. : bipe navig rough environ use on- board sens .
: ieee intern confer intellig robot system .
st. loui , mo , usa ( 2009 ) 6 .
clark , r. , wang , s. , wen , h. , trigoni , n. , markham , a. : increas- ing effici 6-dof visual local use multi-mod sensori data .
: humanoid robot ( humanoid ) , 2016 ieee- ras 16th intern confer , pp .
973980 .
ieee ( 2016 ) 7 .
comaniciu , d. , ramesh , v. , meer , p. : kernel-bas object track- ing .
ieee transact pattern analysi machin intelli- genc 25 ( 5 ) , 564577 ( 2003 ) 8 .
comport , a.i. , marchand , e. , pressigout , m. , chaumett , f. : real- time markerless track augment realiti : virtual vi- sual servo framework .
ieee transact visual comput graphic 12 ( 4 ) , 615628 ( 2006 ) 9 .
davison , a. , reid , i.d. , molton , n.d. , stass , o. : monoslam : real-tim singl camera slam .
ieee transact pattern anal- ysis machin intellig 29 ( 6 ) , 10521067 ( 2007 ) 10 .
escand , a. , mansard , n. , wieber , p.b .
: hierarch quadrat program : fat onlin humanoid-robot motion generat .
in- ternat journal robot research 33 ( 7 ) , 10061028 ( 2014 ) 11 .
fallon , m.f. , anton , m. , roy , n. , teller , s. : drift-fre humanoid state estim fuse kinemat , inerti lidar sens .
: humanoid robot ( humanoid ) , 2014 14th ieee-ra interna- tional confer , pp .
112119 .
ieee ( 2014 ) 12 .
ganapathi , v. , plagemann , c. , koller , d. , thrun , s. : real time mo- tion captur use singl time-of-flight camera .
: ieee con- ferenc comput vision pattern recognit , cvpr , pp .
755762 ( 2010 ) 13 .
ganapathi , v. , plagemann , c. , koller , d. , thrun , s. : real-tim hu- man pose track rang data .
: comput vision eccv 2012 , pp .
738751 .
springer ( 2012 ) 14 .
gordon , n.j. , salmond , d.j. , smith , a.f .
: novel approach nonlinear/non-gaussian bayesian state estim .
: iee pro- ceed f ( radar signal process ) , vol .
140 , pp .
107113 .
iet ( 1993 ) 15 .
gratal , x. , smith , c. , bjorkman , m. , kragic , d. : integr 3d featur virtual visual servo hand-ey humanoid robot pose estim .
: ieee/ra intern confer humanoid robot , pp .
240245 ( 2013 ) 16 .
hansen , d.w. , hansen , m.s. , kirschmey , m. , larsen , r. , sil- vestr , d. : cluster track time-of-flight camera .
: ieee comput societi confer comput vision pattern recognit workshop , cvprw  08 , pp .
16 ( 2008 ) 17 .
herdt , a. , diedam , h. , wieber , p.b. , dimitrov , d. , mombaur , k. , diehl , m. : onlin walk motion generat automat foot- step placement .
advanc robot 24 ( 5-6 ) , 719737 ( 2010 ) 18 .
hornung , a. , wurm , k. , bennewitz , m. : humanoid robot localiza- tion complex indoor environ .
: ieee/rsj intern confer intellig robot system , pp .
16901695 .
taipei , taiwan ( 2010 ) 19 .
klein , g. , murray , d. : parallel track map small ar workspac .
: proc .
sixth ieee acm intern sympo- sium mix augment realiti ( ismar  07 ) .
nara , japan ( 2007 ) 20 .
maier , d. , hornung , a. , bennewitz , m. : real-tim navig 3d environ base depth camera data .
: ieee inter- nation confer humanoid robot , pp .
692697 .
osaka , japan ( 2012 ) 21 .
martnez , p.a. , castelan , m. , arechavaleta , g. : vision base per- sistent local humanoid robot locomot task .
in- ternat journal appli mathemat comput sci- enc 26 ( 3 ) , 669 ( 2016 ) 22 .
martnez , p.a. , vara , d. , castelan , m. , camacho , m. , marqu , f. , arechavaleta , g. : 3d shape reconstruct humanoid generat video sequenc .
: humanoid robot ( humanoid ) , 2014 14th ieee-ra intern confer , pp .
699706 .
ieee ( 2014 ) 23 .
matsumoto , y. , wada , t. , nishio , s. , miyashita , t. , hagita , n. : scalabl robust multi-peopl head track combin dis- tribut multipl sensor .
journal intellig servic robot 3 ( 1 ) , 2936 ( 2010 ) 24 .
michel , p. , chestnutt , j. , kagami , s. , nishiwaki , k. , kuffner , j. , kagami , s. : gpu-acceler real-tim 3d trake humanoid locomot stair climb .
: ieee intern confer intellig robot system .
san diego , usa ( 2007 ) 25 .
michel , p. , chestnutt , j. , kagami , s. , nishiwaki , k. , kuffner , j. , kanad , t. : onlin environ reconstruct bipe naviga- tion .
: ieee intern confer robot automa- tion .
orlando , fl , usa ( 2006 ) 26 .
migniot , c. , ababsa , f. : 3d human track top view use depth inform record xtion pro-liv camera .
: ad- vanc visual comput , pp .
603612 .
springer ( 2013 ) 27 .
nummiaro , k. , koller-mei , e. , van gool , l. : adapt color- base particl filter .
imag vision comput 21 ( 1 ) , 99110 ( 2002 ) 28 .
obwald , s. , hornung , a. , bennewitz , m. : improv propos high accur local use rang vision data .
: ieee/rsj intern confer intellig robot sys- tem .
vilamoura , portug ( 2012 ) 29 .
oriolo , g. , paolillo , a. , rosa , l. , venditelli , m. : humanoid odo- metric local integr kinemat , inerti visual infor- mation .
autonom robot pp .
113 ( 2015 ) 30 .
papadopoulo , a.v. , bascetta , l. , ferretti , g. : generat hu- man walk path .
: ieee/rsj intern confer intellig robot system , pp .
16761681 .
tokyo , japan ( 2013 ) 31 .
popp , r. : vision-bas human motion analysi : overview .
comput vision imag understand 108 ( 1 ) , 418 ( 2007 ) 32 .
puydupin-jamin , a.s. , johnson , m. , bretl , t. : convex approach invers optim control applic model human locomot .
: ieee intern confer robot autom , pp .
531536 .
minnesota , usa ( 2012 ) 33 .
quigley , m. , conley , k. , gerkey , b.p. , faust , j. , foot , t. , leib , j. , wheeler , r. , ng , a.i .
: ros : open-sourc robot oper system .
: icra workshop open sourc softwar ( 2009 ) 34 .
rauter , m. : reliabl human detect track top-view depth imag .
: ieee confer comput vision pat- tern recognit workshop , cvprw , pp .
529534 ( 2013 ) 35 .
siddiqui , m. , liao , w. , medioni , g.g .
: vision-bas short rang interact person servic robot user .
intellig servic robot 2 ( 3 ) , 113130 ( 2009 ) 36 .
simon , d. : optim state estim : kalman , h infin , nonlinear approach .
wiley-intersci ( 2006 ) 37 .
sisbot , e.a. , marin-uria , l.f. , alami , r. , simeon , t. : human awar mobil robot motion planner .
ieee transact robot- ic 23 ( 5 ) , 874883 ( 2007 ) 16 pablo a. martnez et al .
38 .
sisbot , e.a. , marin-uria , l.f. , broquer , x. , sidobr , d. , alami , r. : synthes robot motion adapt human presenc .
inter- nation journal social robot 2 ( 3 ) , 329343 ( 2010 ) 39 .
spinello , l. , arra , k.o .
: peopl detect rgb-d data .
: ieee/rsj intern confer intellig robot sys- tem , pp .
38383843 ( 2011 ) 40 .
stass , o. , davison , a. , sellaouti , r. , yokoi , k. : real-tim 3d slam humanoid robot consid pattern generat infor- mation .
: ieee/rsj intern confer intellig ro- bot system , pp .
348355 .
beij , china ( 2006 ) 41 .
stilman , m. , nishiwaki , k. , kagami , s. , kuffner , j. : plan execut navig among movabl obstacl .
: ieee inter- nation confer intellig robot system .
beijin , china ( 2006 ) 42 .
trigg , b. , mclauchlan , p. , hartley , r. , fitzgibbon , a. : bundl adjust modern synthesi .
vision algorithm : theori practic ( 1999 ) 43 .
wurm , k.m. , hornung , a. , bennewitz , m. , stachniss , c. , bur- gard , w. : octomap : probabilist , flexibl , compact 3d map represent robot system .
: ieee intern confer- enc robot autom , workshop best practic 3d percept model mobil manipul .
anchor- age , alaska ( 2010 ) 44 .
xia , l. , chen , c.c. , aggarw , j. : human detect use depth inform kinect .
: ieee comput societi confer comput vision pattern recognit workshop , cvprw , pp .
1522 ( 2011 ) 45 .
yilmaz , a. , jave , o. , shah , m. : object track : survey .
acm comput survey ( csur ) 38 ( 4 ) , 13 ( 2006 )
