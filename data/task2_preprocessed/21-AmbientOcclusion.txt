ii_revision_thomas.pdf imag enhanc unsharp mask depth buffer thoma luft carsten colditz oliv deussen univers konstanz, germani figur 1: draw s. dali, p. picasso, g. seurat, h. matisse. artist separ object differ depth local alter contrast order enhanc depth perception. work mimic effect gener imag photograph contain depth information. abstract present simpl effici method enhanc percep- tual qualiti imag contain depth information. similar unsharp mask, differ origin depth buffer con- tent low-pass filter copi util determin inform spatial import area scene. base informa- tion local enhanc contrast, color, paramet image. techniqu aim improv percept complex scene introduc addit depth cues. idea motiv artwork find field neurology, appli imag kind, rang complex landscap data technic artifacts, volum rendering, photograph, video depth information. cr categories: i.3.3 [comput graphics]: picture/imag generationdisplai algorithms; bitmap framebuff opera- tions; i.3.7 [comput graphics]: three-dimension graphic realismcolor, shading, shadowing, textur keywords: artist tone reproduction, non-photorealist render- ing, imag enhancement, complex scene 1 introduct capabl avail model anim softwar power perform todai computers, allow non-comput graphic artist produc render scene contain- ing million triangles. however, standard shade tech- niqu provid graphic hardware, user obtain desir quality, render complex spatial arrange- ment suffer dull appearance. especi true shadow ambient light area offer limit depth perception. present method enhanc perceptu qualiti imag explicitli util depth information. although, idea motiv artwork, render method sole applic non-photorealist render- ing. rather, imag depth inform avail today, approach util enhanc kind synthet images, especi complex scene field volum rendering, technic imagery, landscapes, photographs, video contain depth information. artist tend enhanc contrast alter color local support percept object image. figur 1 show art- work demonstr effect. near boundari object locat object tone local altered: background partli occlud object slightli darken creat impress depth bright halo place ob- ject visual detach background. draw style motiv find field neurology. example, known cognit psycholog retina ey local intensifi contrast enhanc recognit ob- ject (see [eysenck kean 2000]). consequently, artist emphas contour alter local contrast, addition support view process. behavior mechan rel- evant tone mapping. similar imagery, artist repres scene potenti high contrast medium low dynam range. contrast tone map algorithms, painter concret idea scene depth, abl visual encod spatial relationship objects. present comput method achiev similar effect imag contain depth information. method close re- late imag space techniqu produc local contrast en- hancement, e.g. laplacian-of-a-gaussian filter [neycenssac 1993] popular unsharp mask techniqu [mchugh 2005]. contrast methods, perform depth buffer oper obtain addit inform spatial interest areas. inform alter input image, turn intro- duce addit depth cues. appli technique, abl perform color contrast enhanc modul spatial relat object scene. paper structur follows: discuss relev literatur section 2, present algorithm relat known techniqu section 3. following, introduc number possibl effect applic complex computer-gener objects, render global illumin images, photograph video depth information. discuss approach section 4, conclud paper outlin futur work. 2 relat work work relat research fields. mention above, tone map high dynam rang imag involv compres- sion local contrast, implement perceptu- alli feasibl way. imag manipul tech- niqu enhanc local contrast unsharp mask. field non-photorealist rendering, imag enhanc abstract special interest, method pre- sent alter color tone render imag order introduc percept cue recognit addit spatial information. tone map imag enhancement: wide ac- cept assumpt tone reproduct state human ey sensit local contrast absolut lumin (see [dicarlo wandel 2000]). reinhard et al. [2002] present tone map procedur basi zone introduc adam [1980]. work local contrast enhanc appli addit global operations. special values, oper produc unwant ring artifact object (see figur 9 [reinhard et al. 2002]), though, combin depth inform effect us spatial enhancement. overview differ tone map oper user studi refer ledda et al. [2005] reinhard devlin [2005]. approach imag enhanc divid global local methods. global method mainli repres his- togram modifications, e.g. [hummel 1975; stark 2000]. techniqu aim exploit dynam rang render de- vice modifi histogram imag part it. attract simplic minor comput ef- fort. however, context techniqu local method particular interest, allow user modifi con- trast vicin certain point. especi local contrast enhanc base edg detect filter wide used. introduct topic given mchugh [2005], relat work propos neycenssac [1993] beghdadi ne- grate [1989]. wavelet base approach local contrast enhance- ment introduc starck et al. [2003]. furthermore, color vi- sion model retinex model appli tone mapping, local amplifi contrasts, e.g. [mey- lan susstrunk 2004]. nevertheless, miss depth informa- tion limit possibl effects. techniqu combin approaches, modifi tone input imag well, addition consid depth information. non-photorealist rendering: saito takahashi [1990] pro- pose effect local enhanc imag depth infor- mation. author improv render object utiliz- ing depth buffer deriv creation contours, creases, hatch strokes. work major inspir us, although, deriv depth buffer optim visual separ object complex scene. dis- continu depth function caus peak derivatives. contrast method, us inform obtain differ origin low-pass filter depth buffer modul contrast colors. artist contrast enhanc winkenbach et al. [1994]. partli remov textur detail surfac artis- tic reason better percept synthet drawings. kind contrast enhanc motiv var- iou toon silhouett render techniqu present recent years. techniqu modul visual detail repres object complex botan scene present deussen strothott [2000]. differ depth buffer guid silhouett rendering. depth differ exce given threshold, line drawn. thus, spatial import depicted: object larger depth distance, impor- tant draw separ border. work close relat method, consid depth differ emphas complex spatial arrangements. import work non-photorealist camera intro- duce raskar et al. [2004]. produc illustrations, precis silhouett drawings, photograph multi-flash camera, thus, allow enhanc photograph addi- tional depth cues. gooch et al. [1998] present non-photorealist shade model aim enhanc imag qualiti region appear dull us- ing standard render techniques. combin silhouett lines, varieti draw style produc especi im- prove percept dark ambient areas. tech- niqu allow alter appear singl objects, tech- niqu work set object spatial separation. nev- ertheless, appli color model chang color depth discontinuities. compar work relat shade algo- rithm introduc cignoni et al. [2005]. work modifi surfac normal order alter shade objects. way, edg emphas surfac slightli shade like- wise diminish especi dull appear produc standard shade procedures. method recent enhanc displai spatial complex scene provid addit contrast comput ambient occlus [pharr green 2004; bun- nell 2005]. ambient occlus determin percentag hemispher object point occlud part object. object addit textur determin especi darken concav surfac areas. their object space method, method work screen space adapt chang camera, e.g. chang get smaller camera zoom. allow enhanc small detail zoom view. furthermore, need pre- comput textur abl introduc varieti effect scenes. section 3.2 method compared. 3 unsharp mask depth buffer section illustr relev integr depth informa- tion shade process. firstli formul shade style function depth, shown exampl scene figur 2. simpl scene contain objects, sphere cube, arrang other. depth buffer valu result lumin valu horizont scan- line shown figur 2(a) figur 2(b). silhouett draw- ing scene look similar figur 2(c), resembl bi- (a) (b) (c) (d) (e) figur 2: exampl scene: (a) depth buffer scanline; (b-e) shade function scanline: (b) phong shading); (c) silhouett rendering; (d) toon shading; (e) halo contour. (a) (b) (c) (d) (e) figur 3: depth functions: (a) depth function derivative; (b) differ origin low-pass filter depth buffer. result shading: (c) ad spatial import function d < 0; (d) linear combin origin input imag high contrast version weight absolut valu spatial import function | d | > 0; (e) depth darken neg fraction spatial import function d > 0, prove natur imag enhanc operator. nari represent depth buffer derivative. toon shade shown figur 2(d) combin silhouett render- ing quantiz color representation. achiev effect larger rang halo line figur 2(e) effect motiv artwork figur 1, obtain informa- tion spatial relat objects. accordingly, propos techniqu similar local con- trast enhanc unsharp mask. here, mask creat subtract low-pass filter copi input image, effect result high-pass filter. result high frequenc signal ad origin imag obtain sharpen local contrast enhancement. especi effect, larger filter kernel size result enlarg radiu influence. result smooth imag modif distribut larger area. techniqu work convent imag data consid depth information, result, enhanc local contrast image. however, appli techniqu depth bufferi.e. comput differ origin low-pass filter depth bufferw convei addit se- mantic information: spatial relat object scene. example, appli convent unsharp mask imag contain blue object blue background, imag alter lack color contrast. techniqu enabl alter color scenario addit depth information. figur 3 demonstr approach scene figur 2. depth buffer deriv shown figur 3(a). deriv depth function indic sil- houett lines, fail gener halo effect local nature. consequently, appropri visual depth differenti complex scene discontinu depth buffer (see [deussen strothott 2000]). reason propos techniqu similar unsharp mask. therefore, comput differ origin low-pass filter depth buffer shown figur 3(b). result function spatial import function d. given input imag : n2 r3 rgb color space corre- spond depth buffer d : n2 r d(x,y) [0,1], comput d d = gdd (1) g d convolut gaussian filter kernel depth buffer d. specifi kernel size g percent- ag imag diagonal, usual us kernel size 2% 5%. similarli common local contrast enhancement, func- tion contain local depth contrasts, interpret following: d 0 repres area spatial important, | d |> 0 repres area special approach. thereby, neg spatial import d < 0 repre- sent area background object close occlud objects, d > 0 repres boundari area foreground objects. result, spatial import edges, e.g. area contain larg depth differences, locat singular function. obtain inform alter area belong object differ depth. (a) (b) (c) (d) figur 4: 3d exampl scene: (a) origin render standard flat shading; (b) ad spatial import function ( < 0); (c) linear combin origin high contrast rendering; (d) depth darken ( > 0). 3.1 imag modif spatial impor- tanc function d following, demonstr applic spatial im- portanc function modul color, lumin contrast input image, thus, produc stronger depth cue recog- nition spatial arrangement. mentioned, spatial import function contain inform spatial relev edges. inform integr directli modul input imag i. consequently, add spatial import function color channel comput = +d (2) r user defin weight parameter. result usual provid addit depth cues, lumin input imag alter spatial import edg (illustr figur 3(c)). import characterist simpl procedur interdepend depth differ en- hancement: larger depth differences, higher visual enhancement. drawback simpl method consid depth differences. reduc visual contrast edge, color foreground object brighter background (illustr arrow figur 3(c)). reason addition consid color in- imag (see figur 3(d)). preliminarili comput version input imag increas global contrast cglobal(i) us- ing standard techniqu known common imag edit tools, e.g. histogram equal stretching. us linear combin origin input imag contrast enhanc version weight absolut valu spatial import function d: = cglobal(i) | d | + (1 | d | ). (3) contrast result imag local increas depend- ing spatial inform obtain d. method enhanc visual contrast spatial import edges, requir color lumin contrast contain input image. hence, method fail color differ- enc spatial import edge. possibl solut miss color contrast introduc kind artifici contrast: similar cast shadow avail common imag edit tools, darken background spatial import edg comput = +d (4) d repres neg fraction spatial im- portanc function. case distant object spatial import edg darkened, foreground left unchang (illustr figur 3(e)). advantag achiev convinc result emphas spatial relat objects. consequence, result imag provid natur result appli in- data. set util enhanc spatial arrang complex scenes. techniqu slightli re- sembl appear known global illumin tech- niqu (see figur 5). 3.2 exampl analog describ enhanc function introduc effect alter input image. number exampl correspond formal descript describ following. figur 4 show small 3d exampl scene rectangular object standard flat shade algorithm shadows. scene exemplifi typic class appli- cation algorithm: white object white back- ground, visual detach equal color. figur 4(b) demonstr case imag enhanc func- tion (2): spatial import function directli integr ad input image. result, achiev addit depth cue allow visual separ objects, de- creas contrast borders, e.g. border white dark object. problem avoid figur 4(c) demonstr second imag enhanc function (3): re- sult linear combin high contrast version origi- nal imag weight absolut valu spatial import function. however, white object separ background miss lumin contrast. figur 4(d) depth darken (4) appli introduc natur depth cue that, view, provid best object separation. depth darken especi us case small isol object usual complex botan scenes. figur 5 show result low-pass filter depth buffer gaussian kernel size 2% imag diagonal. tech- niqu interior tree darken result contrast increased. similar effect difficult achiev standard shade techniques, possibl precomput light maps. accompani video effect observ mov- ing objects. similar result achiev global illumin render sponza atrium scene shown figur 6. global illumin contrast reduc shadow region scene. abl add contrast especi spatial interest region arches. course, differ subtl order influenc global illumin much. addit depth darken figur 6(b), appli depth brighten figur 6(c), resembl smooth halo effect. effect simpli achiev negat user paramet . possibl integr color modulations: similar gooch light model technic illustr [gooch et al. 1998], abl integr artifici color contrast modul foreground background complementari colors, e.g. cold warm color. analog gooch light model, choos colors, cold cc warm cw. color modul neg fraction d posit fraction d+ spatial import function, respectively. factor addition weight user paramet specifi intens effect: = +(dcc +d+cw) (5) figur 7(c) demonstr effect: add shade in- spire gooch shade model area larg depth differ- ences. result, yellowish halo appear object enhanc blueish background shading. applic function photograph contain depth inform shown figur 8. appli depth dark- en gaussian filter kernel size 5% im- ag diagonal. especi example, high color saturation, effect provid addit depth cue support spatial recognit objects. accompani video demonstr photograph exampl modifi algorithm. furthermore, small video anima- tion captur approxim depth information. depth inform reconstruct image-bas algo- rithm stereo imag pairs, visibl artifact produc smooth imag area contain hardli texture. however, miss textur help suppress artifact appli technique: similar (3) produc addit depth cue | cglobal(i) |> 0, comput version input im- ag clocal(i) local contrast enhanc oper describ mchugh [2005]. result, | clocal(i) | 0 smooth untextur imag regions, result hardli imag enhanc turn suppress visibl depth artifacts. result demonstr accompani video, show addit depth cue hardli visibl artifacts. figur 9 comparison result ambient occlus rendering. effect quiet different. ambient occlus simul global illuminationand need precomput time complex objectsour method work screen space, allow better percept object de- tail zoom image. techniqu combined. 3.3 implement implement oper fragment shader order ex- ploit comput power graphic hardware, avoid backread depth inform graphic board. allow achiev reason high frame rate complex scenes. computer-gener imag present paper comput frame rate 5-20 frame second standard pc 3 ghz nvidia 6800 board. general, enhanc shade need fix gpu time given imag size. medium filter size 2% imag diagon addit render effort 40 ms 800600 pixel imag 60 ms 1024768 pixel image. larger filter kernel size 5% imag diagon method take 100 ms 800600 pixel imag 150 ms 1024768 pixels. 4 discuss consid differ origin low- pass filter depth buffer, qualiti depth buffer spe- cial importance. particularli critic photograph video captur includ approxim depth informa- tion. here, artifact visibl occur signifi- differ depth buffer color image. issu non-linear distribut depth values, mean- ing signific amplitud variat spatial im- portanc function compar object foreground object background. however, characterist pro- vide natur result emphas spatial relat fore- ground hardli chang distant objects. possibl recomput depth valu achiev linear distribution. exampl creat non-linear linear distribut depth values. addition, signific attribut size filter kernel comput low-pass filter version depth buffer. larg filter kernel result larger area influence, small filter kernel reproduc details, time tend produc exagger results. especi object signific differences: larg filter kernel smooth ob- ject result minor imag manipul object, small filter kernel show visibl changes. incorpor addit parameterssimilar thresh- old convent unsharp maskmight help- ful. issu address futur work look adapt approach. advantag approach gener applicability. appli algorithm imag data avail depth infor- mation. simpl effici realiz capa- biliti graphic hardware, util real-tim graphic pipelines. mainli us per-pixel operations, computa- tional effort mainli scale imag resolut depend minorli scene complexity. given coher depth infor- mation, method provid high frame-to-fram coher anim imag filter characteristic. conclusion, basi method spatial import function contain inform spatial import areas, wai perform imag manipulations. great divers make difficult specifi appro- priat function paramet particular application. 5 conclus futur work present simpl method enhanc imag contain depth information. differ origin low-pass filter depth buffer comput order spatial import areas. inform util local enhanc contrast color input image, thus, improv perceptu recognition. method us scene contain spatial complex arrang objects. appli techniqu allow emphas object foreground visual depict spatial relat complex scenes. here, espe- cialli effect depth darkening, mean slightli darken background objects, introduc natur addit depth cue usual increas local contrast. method combin imag oper chang contrast, lightness, color parameters. approach reli sole color depth buffer operations. given data coher animation, method provid coher results. complex objects, e.g. botan objects, stabl result artifact achiev shown accompani video. furthermore, case edit video materi contain depth buffer artifactswhich appear stereo vision approach reconstruct depth bufferw provid enhanc oper sill pro- duce smooth results. work give small select possibl oper depth depend imag manipulations. countless possil- iti integr propos spatial import function imag enhanc process. possibl direct futur combin method non-photorealist render tech- niqu sens contrast enhanc support addit hatching, stippl stroke-bas techniqu order increas dynam drawings. 6 acknowledg thank daniel scharstein richard szeliski provid photograph depth [scharstein szeliski 2003] vi- sual media group microsoft research provid video depth inform accomplish materi [zitnick et al. 2004]. imag sponza atrium model fig- ur 6 provid christoph welkovits. additionally, want thank anonym review construct sugges- tion help prepar final version, anna dowden- william proofread paper. work support dfg graduiertenkolleg (1042) explor analysi visual- izat larg inform space univers konstanz, germany. refer adams, a. 1980. camera. ansel adam photographi series. littel, brown company. beghdadi, a., le negrate, a. 1989. contrast enhance- ment techniqu base local detect edges. vision, graphics, imag process 46, 2, 162174. bunnell, m. 2005. dynam ambient occlus indirect lighting. gpu gem 2. addison-wesley, 223233. cignoni, p., scopigno, r., tarini, m. 2005. simpl normal enhanc techniqu interact non-photorealist renderings. & graphic 29, 1 (feb), 125133. deussen, o., strothotte, t. 2000. computer-gener pen-and-ink illustr trees. proceed acm sig- graph 2000, 1318. dicarlo, j. m., wandell, b. a. 2000. render high dynam rang images. proceed spie: imag sensors, vol. 3965, 392401. eysenck, m., keane, m. 2000. cognit psychology. psycholog press. gooch, a., gooch, b., shirley, p., cohen, e. 1998. non-photorealist light model automat technic illus- tration. proceed acm siggraph 98, 447452. hummel, r. a. 1975. histogram modif techniques. com- puter graphic imag process 4, 3 (sep), 209224. ledda, p., chalmers, a., troscianko, t., seetzen, h. 2005. evalu tone map oper high dynam rang display. acm transact graphic 24, 3 (aug), 640648. mchugh, s., 2005. digit photographi tutorials. meylan, l., susstrunk, s. 2004. bio-inspir color imag enhancement. proceed spie: human vision electron imaging, vol. 5292, 4656. neycenssac, f. 1993. contrast enhanc laplacian- of-a-gaussian filter. cvgip: graphic model imag pro- cess 55, 6, 447463. pharr, m., green, s. 2004. ambient occlusion. gpu gems. addison-wesley, 279292. raskar, r., tan, k.-h., feris, r., yu, j., turk, m. 2004. non-photorealist camera: depth edg detect styl- iz render multi-flash imaging. acm transact graphic 23, 3, 679688. reinhard, e., devlin, k. 2005. dynam rang reduc- tion inspir photoreceptor physiology. ieee transact visual graphic 11, 1 (jan), 1324. reinhard, e., stark, m., shirley, p., ferwerda, j. 2002. photograph tone reproduct digit images. acm transact graphic 21, 3 (jul), 267276. saito, t., takahashi, t. 1990. comprehens render 3-d shapes. graphic (proceed acm sig- graph 90) 24, 4, 197206. scharstein, d., szeliski, r. 2003. high-accuraci stereo depth map structur light. proceed vision pattern recognition, 195202. starck, j., murtagh, f., candes, e., donoho, d. 2003. grai color imag contrast enhanc curvelet transform. ieee transact imag process 12, 6, 706717. stark, j. 2000. adapt imag contrast enhanc gen- eral histogram equalization. ieee transact imag process 9, 5 (may), 889896. winkenbach, g., salesin, d. 1994. computer-gener pen-and-ink illustration. proceed acm siggraph 94, 91100. zitnick, c. l., kang, s. b., uyttendaele, m., winder, s., szeliski, r. 2004. high-qual video view interpol layer representation. acm transact graphic 23, 3 (aug), 600608. figur 5: enhanc complex botan object depth darkening. (a) (b) (c) figur 6: exampl improv radios render architectur scene: (a) origin rendering; (b) depth darkening; (c) depth brighten result halo effect. figur 7: enhanc complex scene: origin render (left); depth darken (middle); color version inspir gooch light model (right). (a) (b) figur 8: enhanc photograph depth inform (obtain scharstein szeliski [2003]): (a) origin photograph; (b) depth darkening. (a) (b) (c) figur 9: comparison ambient occlusion: (a) origin rendering; (b) depth darkening; (c) ambient occlusion. ambient occlus mimic global illumin effect, depth darken oper work screen space allow better percept detail zoom view.