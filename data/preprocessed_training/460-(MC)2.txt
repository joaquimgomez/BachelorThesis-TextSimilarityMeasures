two-scal topolog optim comput materi design: integr approach received: 20 juli 2017 revised: 4 octob 2017 accepted: 9 novemb 2017 doi: 10.1002/nme.5742 r e s e r c h r t c l e two-scal topolog optim comput materi design: integr approach a. ferrer1,2 j.c. cante1,2 j.a. hernndez1,2 j. oliver1,3 1centr internacion mtode numric en enginyeria, universitat politcnica catalunya, campu nord, barcelona, spain 2escola superior d'enginyeri industrial, aeroespaci audiovisu terrassa, universitat politcnica catalunya, campu terrassa, terrassa, spain 3escuela tcnica superior ingeniero caminos, canal y puerto barcelona, universitat politcnica catalunya, campu nord, barcelona, spain correspond a. ferrer, centr internacion mtode numric en enginyeria, universitat politcnica catalunya, campu nord, 08034 barcelona, spain; escola superior d'enginyeri industrial, aeroespaci audiovisu terrassa, universitat politcnica catalunya, campu terrassa, 08222 terrassa, spain. email: fund inform european research council ; european union' seventh framework programme, grant/award number: fp/2007-2013 320815; erc advanc grant project advanc tool comput design engin materi comp-des-mat; nation research plan, grant/award number: mat2014- 60919-r summari work, new strategi solv multiscal topolog optim prob- lem presented. altern direct algorithm precomput offlin microstructur databas (comput vademecum) effici solv problem. addition, influenc consid manufactur con- straint examined. then, strategi extend solv coupl problem design macroscop microscop topologies. detail algorithm numer exampl valid methodolog provided. keyword level sets, materi design, multiscale, topolog optim 1 introduct topolog optim gain consider popular recent year mathemat tool address engi- neer design problems. popular simp (solid isotrop materi penalization) method,1 shape optim method mean level set function,2 topolog derivative,3 heurist beso (bidirect evolutionari structur optimization) method4 arguabl strategi solv topolog optim problems. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . open access articl term creativ common attribut license, permit use, distribut reproduct medium, provid origin work properli cited. 2017 authors. intern journal numer method engin publish john wilei & sons, ltd. int j numer method eng. 2017;123. wileyonlinelibrary.com/journal/nm 1 2 ferrer et al. work, adopt topolog deriv approach follow reasons: (i) mathemat consistency; (ii) free heurist parameters; (iii) abl nucleat new holes; (iv) optim topolog are, general, free grays. topolog optim usual appli design structur given domain, emploi materi design problems.1 framework provid multiscal comput homogen tech- niques, asymptot expansion5 variat multiscal method,6 allow design materi topolog optim microscale. specif case topolog derivative, consider success achiev solv macroscop topolog optim problem3,7 microscop counterpart.8 however, design scale tackl uncoupl way. coupl two-scal topolog optim problem address relat literatur (see works9-12) techniqu simp beso. work draw recent work,13 tackl problem decid kind materials, ie, microscop topologies, appropri optim certain cost function macroscale. hereafter, shall refer problem point-to-point (p2p) materi design problem. order reduc result exorbit comput cost, propos recent work13 precomput microstructur solv possibl microscop topolog optim problem and, then, save solut materi catalog (database), which, borrow term work chinesta et al,14 term comput vademecum. then, solv multiscal problem, straightforward select microstructur entri comput vademecum required. goal work modifi approach recent work13 account manufactur constraints. provid optim manufactur topolog notori work literature. instance, peralta fachinotti15 propos novel strategi deal manufactur constraint choos materi given point set predefin metamaterials. schuri et al11 tackl manufactur constraint ad condit spatial variat volum fraction. alternatively, approach propos kato et al10 impos microstructur domain. contrast, work, advoc divid macroscop domain compon provid optim solut consid microstructur component. shall refer approach component-bas (cb) materi design problem. provid detail propos algorithm numer exampl valid methodology. addition, studi cb approach consistency, ie, cb materi design problem converg p2p one, defin compon tend singl finit element macrostructure. contribut work approach simultan designing, coupl way, macroscop microscop topologies. combin slerp (spheric linear interpolation) algorithm propos work amstutz andr3 solv macroscop topolog p2p cb algorithm propos solv materi design problem. strategi lead p2p cb multiscal topolog optim problem. provid detail algorithm numer examples. section 2, topolog deriv approach solv topolog optim problem macroscal microscale. section 3, p2p approach briefli describ cb approach intro- duce formul detail. strategi algorithm solv problem present illustr numer examples. section 4, result two-scal topolog optim problem solut algorithm presented, numer result two-scal topolog optim provided. finally, section 5 summar result work draw conclud remarks. 2 topolog deriv multiscal topolog optim main virtu topolog deriv provid sensit cost function infinitesim topolog perturbation, normal circular, created. basi deriv topolog deriv establish work sokolowski zochowski16 result shape sensitivity, consolid theori later work novotni sokolowski.17 work novotni et al18 amstutz19 deserv special attention. hand, main drawback topolog deriv techniqu li difficulti obtain topolog derivative, case technic tedious. fact, now, specif cost functions, topolog deriv missing. however, relev advanc achiev year issue. semin work,3 amstutz andr advoc us topolog deriv descent direct level-set algorithm. slerp, algorithm known commun like graphics, provid effici strategi solv topolog optim problem. hand, clear boundari topolog ferrer et al. 3 figur 1 topolog deriv concept algorithm converges, hand, contrast shape optim base algorithms, nucleat hole appear naturally. certainly, topolog deriv appear us tool solv topolog optim problems, get rid heurist parameters. 2.1 topolog deriv let consid unperturb domain r2 complianc function defin j() = 1 2 c 1 d, (1) c stand fourth-ord elast tensor stress elast equilibrium problem. then, consid perturb domain insert x small circular inclus b radiu (see figur 1). let assum given shape function (eg, compliance) j(), associ perturb domain, admit follow topolog asymptot expansion: j() = j() + () (x) + o ( ()) , (2) (x) topolog deriv f() posit function f() 0 0+. then, topolog deriv express obtain pass limit 0+, then, (x) = lim 0+ j() j() () . (3) shown work novotni sokolowski,17 case compliance, topolog deriv written follows: (x) = (x) p su(x) (4) p fourth-ord polar tensor su symmetr gradient displacements. isotrop materials, plane stress, circular inclusions, (see work giusti et al20) polar tensor adopt form p = 1 2 1 + 1 [ (1 + )(1 )i + 1 2 ( ) ( 23) + 12 + 2 (i i) ] , denot second- fourth-ord ident tensors, respectively, = 1 + 1 , = 3 1 + , = e e , 1 = 1 + 1 + , 2 = 1 1 , 3 = (3 4) + 1 (3 4) + 1 , valu e e young' modulu inclus base material, respectively, correspond poisson' ratios. scenario considered: hole (an inclus 0 time young modulu poisson ratio, respect base material) appear design domain, second inclus materi appear hole. write polar tensor p = p(, , , 1, 2, 3), case lead follow expressions: p = { p+ = p(, , 0, 1, 1, 1) x + p = p ( , , 1 0 , 1, 1, 1 ) x , + , fulfil = + , stand domain base materi inclusion, respectively. note 0 > 0 paramet small model void larg entail invert properti stiff matrix. work, set 0 = 103. deriv polar tensor p case anisotrop materials, reader refer work giusti et al.20 4 ferrer et al. 2.2 augment lagrangian slerp algorithm following, provid brief summari slerp algorithm. begin state gener optim problem face topolog optim follows: minim j() subject to: d v , (5) j l(, {0, 1}) r gener cost function (normal compliance), v volum valu achieve, l(, {0, 1}) characterist function defin case level set function c(,r) = { 1 0, 0 > 0. (6) defin follow spaces: = { h1() |d = u0} = { h1() |d = 0} , (7) state characterist function fulfil equilibrium equat a(,u, v) = l(v) v , (8) correspond weak form standard elast problem: u = 0 , = c() su, u = u0 d, n = t n , (9) stress tensor c() elast constitut (fourth-order) tensor defin c() = { c = 1, c = 0. (10) here, c c stand constitut tensor materi void, respectively. thus, problem (5) express minim j(()) subject to: c() = () v 0. (11) follow work noced wright,21 augment lagrangian scheme appli (11) lead follow saddl point problem: max. min. j (()) + c() + 1 2 c()2, lagrang multipli penalti parameter. sequel, penalti paramet taken = 1. then, kind iter applied. first, updat iter minim cost function and, then, uzawa-lik updat iteration22 n+1 = n + c(n) (12) maxim cost function. updat level-set function base slerp algorithm, propos work amstutz andr,3 result follow expression: n+1 = 1 sin n [ sin ((1 n)n) n + sin(nn) gn||gn||l2 ] , (13) gn extend topolog derivative, n [0, 1] line search-lik parameter, n angl form n gn. express angl given n = aco [ (n, gn)||||l2 ||gn||l2 ] . (14) ferrer et al. 5 angl n usual defin stop criteria, smaller certain toler (in work, result consid converg < 1). accord work amstutz,23 optim condit fulfil sign level-set function coincid sign topolog deriv function. end, slerp method propos fix-point algorithm seek iter obtain following: (i) parallel function (ii) level-set function unit norm. precis prevent level-set function unrestrictedli increas iterations. deal augment lagrangian scheme inequ constraints, extend topolog deriv comput g(x) = { +max (0, + c()) (x) 0, +max (0, + c()) (x) > 0, (15) topolog deriv cost function. augment lagrangian slerp algorithm describ algorithm 1. addit details, works.3,13,24,25 2.3 macroscop microscop topolog optim problem structur optim problem. structur optim techniqu address standard topolog optim problem aim maxim stiff body, subject extern forc boundari condit fulfil maximum volum fraction constraint. usually, problem written equat (5), (mean) structur complianc taken cost function. figur 2, sketch domain initi configur optim topolog classic cantilev beam illustr problem. work, topolog deriv describ equat (4) slerp algorithm 1 solv structur optim problem. figur 2 sketch structur optim problem (macroscop topolog optim problem) cantilev beam case [colour figur view wileyonlinelibrary.com] 6 ferrer et al. figur 3 sketch materi design problem (microscop topolog optim problem) given stress state [colour figur view wileyonlinelibrary.com] materi design problem. similar concept appli microscop topolog optim problem. main idea, case, endow microstructur particular constitut properti particular fraction volume. work, object function stiff microstructure. similar problem (5), materi design problem express minim j() subject to: d = v, (16) subindex refer microstructur variables, object function defin j() = c1h () . (17) here, c1h stand homogen elast tensor macroscop stress tensornot that, case, tensor input data thought project direct invers constitut tensor desir minimized. figur 3, microcel rve (repres volum element) initi configur shown. arrow repres action (macroscopic) second-ord tensor rve. final topolog shown. detail obtain homogen elast tensor, refer reader work souza neto et al.6 work, squar domain period boundari condit considered. case mate- rial design, topolog deriv isotrop materi develop work giusti26 express equat (4) replac macroscop stress strain microscop counterpart. follow propos advoc work amstutz et al,8 us slerp algorithm 1 describ section 2.2 solv materi design problem. comment earlier, shall refer structur optim topolog optim appli macroscal materi design appli microscale. 3 multiscal materi design problem suppos fix domain subject given forc boundari conditions. goal problem find, point macroscale, optim homogen elast tensor ch design microscop topology, ie, topolog unit cell associ macroscop point, volum domain remain certain valu stiff maximized. figur 4, multiscal materi design problem illustrated. figur 4 illustr point-to-point materi design problem. topolog microstructur consid design variabl optim problem [colour figur view wileyonlinelibrary.com] ferrer et al. 7 3.1 formul p2p materi design problem approach solv multiscal materi design problem p2p materi design approach, topolog microstructur freeli vari domain, ie, neighbour point macroscal featur significantli distinct microstructures. shall discuss later, fact render approach nonviabl reasons. firstly, mathemat point view, us period boundari condit unit cell tacitli pre- sume macroscop bodi construct spatial repetit similar unit cells; secondly, practic point view, structur materi microtopolog virtual chang point hardli manufacturable. nevertheless, present formul p2p problem serv benchmark assess qualiti result obtain manufactur constraint introducedthi discuss cb approach section 3.3. mathemat terms, p2p materi design problem formul minim , c 1 h () d subject to: d v, = 0, + boundari conditions. (18) note macroscop stress tensor depend homogen elast tensor. notic cost function stress tensor defin macroscale, design variabl (characterist function ) defin microscale. term design variabl ( ), problem highli nonlinear cost function equilibrium equation. standard, problem formul ad explicitli equilibrium equat con- straint stress tensor design variable. follow work allaire,5 help understand essenc explain altern direct algorithm. comput cost optim problem, prohibit finit element discret scales, total number design variabl equal product number macroscop microscop gauss points. 3.2 brief review p2p approach allevi comput burden associ p2p materi design problem describ foregoing, us strategi propos recent work.13 completeness, succinctli review follow main ingredi approach. ingredi adopt altern direct strategi solv problem (18) sens that, first, given distribut microscop topologies, equilibrium iter solved, obtain stress , second, stresses, new characterist function (a new distribut microscop topologies) obtained. second ingredi reli separ properti iteration. characterist function local, mean uncoupl rve characterist function; accordingly, instead larg minim iter characterist function, solv sequenc local optim problem (one rve). words, larg optim problem divid small optim problems. idea relat comput effici aspects. basically, instead solv multiscal materi design problem (see section 3.2.2) rve iteration, precomput materi design problem considered. specifically, possibl macroscop stress tensor (which repres input data), materi design problem solved, ie, microstructur topolog designed. result, microstructur database, comput vademecum, creat offlin process. so, comput effort simultan solv multiscal materi design problem split costli offlin step, perform once, rel inexpens onlin optimization. onlin optimization, homogen optim constitut tensor associ given input macrostress retriev databaseh comput savings. 8 ferrer et al. figur 5 comput vademecum [colour figur view wileyonlinelibrary.com] figur 6 map compon ch11 ch12 elast matrix unit-radiu spheric parametr domain [colour figur view wileyonlinelibrary.com] 3.2.1 comput vademecum idea construct call vademecum optim structur try precom- pute optim microtopolog suffici rich repres sampl input macroscop stresses. therefore, question face effici sample, ie, discretize, stress space. question address recent work.13 shown that, small strain regime, modulu input stress influenc final topology. mean that, two-dimension problem, space possibl configur li sphere. indeed, express second-ord tensor voigt notation, = [ x x ] = [ cos() cos() sin() cos() sin() ] , spheric coordinates. thus, parametr domain repres unit sphere (see figur 5). furthermore, small strain regime, ie, scope work, sign stress plai role final topolog either, sens optim microstructur tensil stress state, eg, [a, 0, 0]t compress stress state*[a, 0, 0]t. consider allow significantli reduc comput burden associ construct vademecum, eighth sphere consid comput (see detail recent work13). exampl optim rve typolog volum fraction v = 0.6 triangular structur mesh 6400 element displai figur 5. apart topologies, homogen constitut tensor sampl stress save database, tensor output materi design problem (16) necessari solv equilibrium problem (9). wai illustration, figur 6 contour plot entri ch11 ch12 tensor unit sphere. note that, general, problem (16) parameter differ parameters, eg, young' modulu poisson ratio weak stiff materials, fraction volume, macroscop stress. present method, comput vademecum parameter macroscop stress. research increas dimens parametr domain *needless say, conclus revis extend vademecum idea larg strains. ferrer et al. 9 3.2.2 strategi algorithm strategi solv p2p materi design problem reli altern direct algorithm, wide literatur (see work allaire5). algorithm 2, present detail algorithm. discret comput vademecum lead discontinu complianc function discontinu homogen constitut tensor. deal this, strategi (step 1) select nearest point (microstructure) regular spheric mesh comput vademecum. entail neglig comput cost comparison solv equilibrium equation. 3.2.3 numer exampl p2p materi design problem illustr perform p2p approach, figur 7 exampl consist rectangular domain hing corner subject concentr unit load middle. domain discret (a) (b) (c) (d) figur 7 point-to-point materi design problem bend beam. homogen materi distribut iter correspond iter shown. materi distribut allow design point point. a, iter 1; b, iter 2; c, iter 3; d, final iter 10 ferrer et al. figur 8 represent point-to-point materi design problem cb materi design problem. domain divid subdomain (components), microstructur impos homogen subdomain fulfil manufactur constraint [colour figur view wileyonlinelibrary.com] nonstructur mesh 5056 linear triangular element, volum fraction v = 0.6, toler stop iter procedur set tol = 103. hand, microscop domain discret mesh 6400 linear triangular elements. figur 7, initi condit microstructur (squar hole) satisfi desir volume. addition, intermedi iter optim materi distribut repres (not symmetr selected) microstructur presented. note obtain result offer symmetr solut nonintuit significantli differ microstructur topolog obtain solut p2p materi design problem. 3.3 cb approach (design components) argu altern direct algorithm 2 theoret solv p2p materi design problem (18). however, result p2p materi design approach present relev manufactur limitations. design materi structur featur differ microstructur p2p unrealistic. work aim present clear realist results, addit constraint problem (18) introduced. give rise term cb materi design problem. order establish manufactur constraints, macrostructur divid subdomain (or components) microstructur impos subdomain. optim terms, formul minim ,i n c1h (i ) d subject to: vd, = 0, + boundari conditions, (19) stand volum subdomain (ni = ). figur 8 depict roughli p2p materi design problem cb materi design problem. 3.3.1 suboptim reformul optim point view, manufactur constraint impos microstructur com- ponent. turn decreas number design variables. thus, cb materi design problem (19) seen priori afford p2p materi design problem. however, opposit happens. hand, decoupling, explain section 3.2, longer holds. hand, number design variabl increas simultan number components. ferrer et al. 11 reason rise propose, remedy, reformul cb materi design problem (19). mathemat terms, propos follow (suboptim feasible) problem: minim ,iv n c1h (i ) d subject to: = 0, + boundari conditions, (20) v correspond vademecum space follows: v = { l(, {0, 1}) | solv problem (16)} (21) n stand number subdomains. words, possibl microstructur topolog go search comput vademecum, ie, databas gener offline, optim respect current stress state subdomain. instead look optim microstructur topolog subdomain possibl microstructur topolog set, prefer seek comput vademecum set. certainly, disadvantage, lead suboptim solutions. nevertheless, advantage, comput solv microscop topolog optim problem (in compon iteration) avoided. defin 2 solut p2p materi design problem (18), man solut cb materi design problem (19), com solut suboptim cb materi design problem (20), cost function satisfi follow inequalities: j ( 2 ) j(man ) j ( com ) . (22) cb materi design problem (19) tackled, suboptim cb materi design problem term cb materi design problem indistinguishably. 3.3.2 strategi algorithm propos p2p materi design problem, altern direct algorithm solv cb materi design problem (20). result strategi mainli mimics, roughli speaking, propos p2p materi design problem. take advantag separ properti (the subdomain plai role gauss points) comput save microstructur databas (comput vademecum). however, materi design iter algorithm 2, slightli differ problem solved. specif- ically, stress state value, instead problem (16), microstructur topolog solv follow problem: minim iv c1h (i) d. (23) turn, comput vademecum space v (unit sphere) parameter variabl ( ), problem (23) rewritten follow terms, minim , c1h (,) . (24) note altern direct algorithm, solv problem (24), stress variabl frozen (fix direction). consequently, independ consid given data problem (24). thus, optim problem variabl solv subdomain. specifically, optim problem consist find unit sphere (comput vademecum), point (microstructure) minim compliance. case, try possibl constitut tensor database, select provid minimum valu cost. certainly, better effici procedur proposed. however, valu con- stitut tensor stored, simpl matrix-vector product computed. experi show comput oper signific solv fem equat which, comput terms, repres bottleneck problem. strategi summar algorithm 3. 12 ferrer et al. (a) (b) (c) (d) figur 9 component-bas materi design problem appli bend beam example. homogen materi distribut iter differ microstructur appear iter process. materi design p2p; rather, microstructur emploi given subdomain (fulfil manufactur constrains). a, iter 1; b, iter 2; c, iter 3; d, final iter 3.4 numer result cb materi design problem numer exampl perform illustr perform cb materi design strategy. bend beam. example, present bend beam cb approach. cases, domain discret nonstructur mesh 5056 linear triangular element. seen figur 9, domain regularli par- tition 8 subdomains. symmetr constraint ad problem initi materi distribut taken p2p case. additionally, intermedi final iter shown. note case, microstructur subdomain bring cb design. aerodynam profile. consid aerodynam profilestandard wing riba second numer example. bend forc instabl buckl strongli determin optim design, assum sake simplic plane stress state small strains. addition, aerodynam forc (lift l = 10 drag d = 1) model singular forc appli aerodynam center (see figur 10). aerodynam profil partit 4 subdomain (see figur 10). start point, microstructur topolog circular hole fulfil desir fraction valu v = 0.6 considered. thus, initi iter correspond feasibl iteration. order shed light altern ferrer et al. 13 figur 10 boundari condit discret aerodynam profil unstructur mesh. partit domain compon shown. figur 11 aerodynam profil example. represent microstructur histori iter 4 compon structure. cost minim respect blue respect (microstructure) red. represent iter illustr spirit altern direct algorithm [colour figur view wileyonlinelibrary.com] direct algorithm 3 cb materi design problem, show, figur 11, descent differ direct differ columns. column, solv equilibrium equat which, optim terms, lead minim complianc respect stress . decreas cost function equilibrium repres blue cost function line. contrary, decreas cost select optim microstructur (minim respect ) shown red repres second column figur 10. note algorithm converg extrem fast, iter minim respect need decreas major cost function. case, optim cb materi design solut provid increas 16% stiff respect initi iter provid appropri microstructur component. 14 ferrer et al. figur 12 complianc comparison point-to-point (blue) component-bas materi design approach (red) bend beam exampl [colour figur view wileyonlinelibrary.com] comparison p2p cb materi design problem. point, conveni compar p2p cb materi design approaches. approach tackl optim problem differ includ number design variables. accord equat (22), fact result smaller valu cost function. figur 12, cost function approaches, case bend beam example, depicted. expected, p2p materi design approach achiev smaller valu cost function. case p2p materi design approach, complianc decreas 35%, case cb materi design approach, complianc decreas 18%. case stop criteria taken k = 102. note that, strong nonlinear faced, converg achiev iterations. additionally, worth stress that, comput vademecum, numer exampl solv 5 minut comput standard pc (3.40 ghz processor 64-bit architecture) matlab environment. 3.5 consist effici mention problem (20), main idea cb materi design approach li assum homogen materi distribut subdomain. principle, subdomain partit priori decid user depend (a) (b) (c) (d) (e) figur 13 sequenc problems, differ number subdomains, represented. aim studi converg component-bas materi design approach p2p materi design approach. a, subdomain; b, 2 subdomains; c, 8 subdomains; d, 32 subdomains; e, 128 subdomain ferrer et al. 15 particular problem. however, clear that, fix domain, number variabl optim problem increas insofar number subdomain increases, consequently, object function decrease. therefore, follow question natur aris junctur discussion: sequenc problem solv cb materi design approach, number subdivis increases, converg solut problem solv p2p materi design approach size subdomain coincid size elements? words, cb materi design approach appli problem size element size subdomain complianc compar complianc obtain p2p materi design approach, obtain values? case, cb materi design approach consist approach. similarly, second question emerg regard: if, case study, size subdomain arbitrari decided, size select influenc cost function? second question, later explained, relat effici concept. consistency. let studi sequenc cb materi design problem number subdomain increas that, eventually, subdomain coincid element underli finit element mesh. then, compar solut problem solv p2p materi design approach. end, appli methodolog bend beam example. domain discret regular coars mesh 128 q1 elements. sequenc problem differ subdomain start consid problem subdomain (homogen materi distribut domain). then, divid 2, 8, 32, 128 subdomains. illus- tration sequenc problem comput shown figur 13. boundari conditions, concentr forc appli middl domain support corners. ratio length/height rectangular domain 2. solv sequenc problems, depict figur 14 valu compliance. observ case, minimum valu complianc decreas monoton number subdo- main increases. note rel larg number iter requir reach optim solut worrisom since, real applications, number subdomain expect high. clearly, behavior consequ increment design variabl produc increment subdomains. complianc p2p materi design approach includ figur 14 reference. solut interpret lower bound cb materi design approach. result illustr inequ constraint state express (22). note complianc valu obtain case 128 subdomains, element subdomain coincide, equal valu p2p materi design approach. reason li fact that, 128 subdomains, gauss point q1 element take microstructur case p2p materi design approach. hence, achiev smaller valu cost. figur 15, observ solut p2p materi design approach converg cb materi design approach. efficiency. defin effici paramet eff ratio absolut valu optim solut obtain p2p materi design 2 absolut valu suboptim solut obtain cb materi design com fix number subdomains, ie, eff = |||j (com )|||||||j ( 2 )|||| x100. (25) figur 14 represent complianc valu function number iter sequenc subproblem shown figur 13. sky-blue, complianc p2p materi design approach depicted. expected, p2p materi design solut behav lower bound component-bas materi design approach [colour figur view wileyonlinelibrary.com] 16 ferrer et al. figur 15 converg component-bas materi design approach p2p materi design approach. complianc valu repres blue sequenc problem component-bas materi design approach shown figur 13. red, optim valu complianc obtain p2p materi design approach. note converg approach number subdomain converg number element [colour figur view wileyonlinelibrary.com] figur 16 represent effici paramet eff function number subdomains. small number subdomains, solut close optim (theoretical) solut [colour figur view wileyonlinelibrary.com] accord complianc inequ state relat (22), effici paramet take posit values. figur 16, depict variat effici paramet number subdomains. observ effici valu increas number subdomain increasesalthough expens ad manufactur limitations. thus, problem govern tradeoff effici manufactur aspects. figur 16 show depend effici number subdomains. notic that, figur 16, subdomain, ie, decid optim microstructur domain, obtain 50% efficiency. note effici consider increas slight increas number subdomains. result show small number subdomains, solut close optim (theoretical) value. 4 multiscal topolog optim turn attent multiscal topolog optim problem. problem, seek maxim stiff structur designing, time, structur topolog microtopolog ferrer et al. 17 (for macroscop gauss point). similar problem encount preced sections, multiscal topolog optim result p2p cb topolog optimization. 4.1 p2p multiscal topolog optim main idea p2p multiscal approach reli solv macrostructur optim problem and, simulta- neously, address p2p materi design problem iteration. procedur possibl gain comput effici achiev mean comput vademecum strategy. mathemat terms, understood gener altern direct algorithm, new variabl added. variabl correspond standard macrostructur topolog optim design variable. specifically, alter- nate direct algorithm, iterations, uncoupl macroscop topolog problem p2p materi design problem. note that, multiscal topolog optim problem, suboptim solut nonconvex problem. solv p2p materi design problem, exploit algorithm discuss section 2. formulation. formally, two-scal topolog optim problem present follows: minim ,, c 1 h () d subject to: d v d v = 0, + boundari conditions. (26) incorpor characterist function extend p2p materi design problem p2p multiscal topolog optim problem. comment deal materi design problem hold multiscal counterpart. needless say, multiscal topolog optim problem present stronger nonlinear involv comput time consum materi design case. number design variabl order macroscop gauss point time microscop gauss point plu order macroscop gauss point . thus, problem, find remedi tackl inher unafford comput cost multiscal topolog optim problem mandatory. strategi algorithm. end, propos particular altern direct algorithm solv problem (26). specifically, macroscop topolog optim iteration, solv p2p materi design problem. thus, propos algorithm altern nonuniformli directions. mathemat terms, reformul problem (26) min. min. , c 1 h () d s. t. d v d v = 0, + boundari conditions. (27) thus, solv preced optim problem, seek find, fix macroscop topolog , solu- tion inner min , problem (or loop) comput iter min problem (or outer loop) slerp algorithm. therefore, algorithm devis appropri combin algorithm 1 p2p materi design algorithm 2. detail describ algorithm 4. 18 ferrer et al. worth stress strategi possibl reduc time-consum comput (due comput vademecum) need solv p2p materi design problem. note that, propos algorithm, microstructur fraction volum enforc homogeneous. case enforc microstructur fraction volume, design variabl space increase, consequently, new local minimum appear. left futur research. 4.2 cb multiscal topolog optim step consid manufactur constraints. emphasi place diminish inher complex problem. tackl it, mimic remedi propos cb materi design problem describ (20) consid manufactur constraints. thus, hand, materi design problem constrain adopt, subdomain, microstructure. hand, microstructur limit on comput database, solv modifi suboptim problem. formulation. concretely, cb multiscal topolog optim formal formul follows: minim ,, iv n c1h (i ) d subject to: d v , = 0, + boundari conditions, (28) n stand number subdomains. microstructur topolog constant subdomain, optim problem consid huge number design variables. note that, cb materi design problem, microstructur request pertain comput vademecum. strategi algorithm. natur wai extend cb materi design algorithm 3 cb multiscal topolog optim problem adapt p2p multiscal topolog optim (algorithm 4). fact, major differ li wai microscop topolog determined. indeed, variables, solv p2p materi design problem (18) algorithm 2, determin solv cb materi design problem (20) algorithm 3. note again, algorithm, altern nonuniformli directions. mathemat terms, consist rephras problem (28) min . min . ,iv n c1h (i ) d s. t. d v , = 0, + boundari conditions. (29) ferrer et al. 19 thus, similar p2p version, problem is, first, solv converg inner min. ,iv problem (or loop) comput iter min. problem (or outer loop) slerp algorithm. final strategi present algorithm 5. again, comput vademecum strategi allow problem afford times. 4.3 numer result following, order ass perform propos strategies, perform comparison optim topolog obtain p2p, cb multiscal topolog optim standard macroscop topolog optim problem. cantilev beam. begin cantilev beam example. domain discret structur mesh 10 704 linear triangular elements. shown figur 17, concentr forc right applied, homo- geneou dirichlet boundari condit (clamped) left imposed. simul start materi everywhere, fraction volum enforc v = 0.6, 0 = 0 = 1. stop criterion taken = 1 tol = 103. figur 18, evalu improv complianc approach. first, left column, fix microstructur domain (homogeneous) considered, ie, standard macrostructur topolog optim problem solved. secondly, middl column, apart macro, materi design problem consid point point, ie, p2p multiscal topolog optim problem solved. finally, column, solu- tion cb multiscal topolog optim problem. establish fair comparison, macrostructur topolog optim case, consid microstructur feasibl fraction volum v = 0.6. differ algorithms, left column show algorithm 1 solv problem (11), middl show algorithm 4 solv problem (26), right show algorithm 5 solv problem (28). rows, intermedi iter final one. ow comput save mention section (no microstructur comput consid onlin process), solv problem 10 minut comput standard pc (3.40 ghz processor 64-bit architecture) matlab environment. interestingly, observ microstructur topol- ogi design tri mimic macrostructur topology. likewise, observ microscop topolog tend adopt pattern resembl macrostructur topology. perform point view, figur 19, complianc comput approaches. decreas 40% mass cases, allow possibl design microscop topology, struc- ture increas stiff 30% p2p multiscal topolog optim problem 21% cb multiscal topolog optim problem respect macrostructur topolog optim solution. figur 17 schemat draw cantilev beam [colour figur view wileyonlinelibrary.com] 20 ferrer et al. figur 18 multiscal topolog optim cantilev beam. left column, macroscal topolog optim solved. middl column, p2p multiscal topolog optim solved. right column, cb multiscal topolog optim solved. cost function valu shown row [colour figur view wileyonlinelibrary.com] figur 19 complianc valu cantilev beam exampl iterations. black, complianc macrostructur topolog optim approach. blue, complianc p2p multiscal topolog optim approach. red, complianc cb multiscal topolog optim approach [colour figur view wileyonlinelibrary.com] 4.4 comment limit view p2p cb multiscal topolog optim results, import improv stiff (30% 21%) achieved. addition, idea gener comput vademecum offer appropri reduc time-consum approach solv nonlinear large-scal optim problem. however, ferrer et al. 21 limit propos approach. firstly, comput vademecum limit specif fraction volume. futur devot explor effici construct vademecum extra variable. secondly, void domain, microstructur topolog optimized. physic point view, option unreasonable. however, worth stress that, strictli speaking, void behav weak materi design microstructur make perfect sense. avoid computations, deactiv void elements. scope studi restrict two-dimension problems. extens three-dimension prob- lem entail difficulty, principle, theoret standpoint. however, practic point view, comput burden associ gener vademecum increas dramatically, parametr space longer repres unit sphere. remedy, replac multiscal topolog optimiza- tionbi suboptim problem optim microstructur topolog sought reduc repres subdomain parametr domain. studi left futur work. analysi result shown section, firstli observ p2p approach provid optim solution. possibl make real microstructur chang p2p. secondly, cb approach, consider improv cost function fulfil manufactur constraints. addition, present algorithm behav effici comput terms. attributed, hand, altern direct algorithm, provid solut rel iter comparison approaches. hand, idea precomput microstructur optim problem computa- tional vademecum afford huge comput savings, allow altern direct algorithm proce solv microstructur problem. 5 conclus work address multiscal topolog optim problems. account two-scal comput homogeniza- tion scheme (fe2), optim problem govern influenc design variabl (defin microscal or, additionally, macroscale) cost function (defin macroscale). aim, present brief review p2p materi design approach altern macroscop topolog optim problem maxim stiff structure. then, order achiev manufactur (and consequ suboptimal) designs, cb materi design approach presented. mitig unafford time-consum comput problem, materi catalog, term comput vademecum, built offlin computation. allow circumv microstructur topolog design effort compon select comput vademecum precomput opti- mal microstructur topology. deal strong nonlinear problem, altern direct algorithm proposed. kei ingredi cb materi design approach consider improv structur stiff- ness (15%) achiev number iter need converg problem. find suggest us multiscal topolog optim problems. additionally, examin converg cb materi design approach p2p materi design approach propos previou works, result consist relat approaches. furthermore, present effici paramet help determin appropri num- ber components, govern tradeoff stiff structur manufactur constraints. second stimul studi consist complementari (instead alternatively) p2p cb multiscal topolog optim jointli macroscop topolog optim problem. p2p cb multi- scale topolog optim provid addit (around 25% 15%) increas stiff increas obtain macroscop topolog design. addition, comput vademecum concept, problem solv 10 minut comput standard pc (3.40 ghz processor 64-bit architecture) matlab environment. examin results, strong coupl macroscal microscale, mechan point view topolog point view, observed. propos approach, two-scal topolog optim problem solv reason comput time. addition, nowadays, comput vademecum concept tandem cb approach straight- forwardli adapt industri problems. current rve replac standard composit materi microstructur design variabl orient fiber number plies. short term, new 22 ferrer et al. optim tool appear obtain improv microscop topologies, comput vademecum enhanc replac current microstructur topolog improv ones. microstructur replaced, comput vademecum remain useful. certainly, addit research need extend methodolog three-dimension problems. acknowledg work lead result receiv fund european research council european union' seventh framework programm (fp/2007-2013) / erc grant agreement 320815 (erc advanc grant project advanc tool comput design engin materi comp-des-mat) nation research plan 2014: mat2014- 60919-r. orcid a. ferrer refer 1. bends mp, sigmund o. topolog optimization: theory, methods, applications. berlin, germany: springer-verlag; 2003. 2. allair g, jouv f, toader am. structur optim sensit analysi level-set method. j comput phys. 2004;194(1):363-393. 3. amstutz s, andr h. new algorithm topolog optim level-set method. j comput phys. 2006;216(2):573-588. 4. huang x, xie ym. new look eso beso optim methods. struct multidiscip optim. 2008;35(1):89-92. 5. allair g. shape optim homogen method. vol. 146. appli mathemat sciences. new york, ny: springer-verlag; 2002. 6. souza neto ea, feijo ra, novotni aa. variat foundat larg strain multiscal solid constitut models: kinemat for- mulation. advanc comput materi modeling: classic multi-scal techniques-scal techniques. weinheim, germany: wiley-vch verlag gmbh & co. kgaa; 2011. 7. yamada t, izui k, nishiwaki s, takezawa a. topolog optim method base level set method incorpor fictiti interfac energy. comput method appl mech eng. 2010;199(45):2876-2891. 8. amstutz s, giusti sm, novotni aa, souza neto ea. topolog deriv multi-scal linear elast model appli synthesi microstructures. int j numer method eng. 2010;84:733-756. 9. xia l, breitkopf p. concurr topolog optim design materi structur fe2 nonlinear multiscal analysi framework. comput method appl mech eng. 2014;278:524-542. 10. kato j, yachi d, terada k, takashi k. topolog optim micro-structur composit appli decoupl multi-scal analysis. struct multidiscip optim. 2014;49(4):595-608. 11. schuri f, stingl m, wein f. effici two-scal optim manufactur grade structures. siam j sci comput. 2012;34(6):b711-b733. 12. rodrigu h, jose mg, bendso mp. hierarch optim materi structure. struct multidiscip optim. 2002;24(1):1-10. 13. ferrer a, oliv j, cant jc, lloberas-val o. vademecum-bas approach multi-scal topolog materi design. adv model simul eng sci. 2016;3(1):1-22. 14. chinesta f, leygu a, bordeu f, et al. pgd-base comput vademecum effici design, optim control. arch comput method eng. 2013;20(1):31-59. 15. peralta i, fachinotti vd. optimization-bas design heat flux manipul devic emphasi fabricability. sci rep. 2017;7(1):6261. 16. sokolowski j, zochowski a. topolog deriv method shape optimization. siam j control optim. 1999;37(4):1251-1272. 17. novotni a, sokolowski j. topolog deriv shape optimization. interact mechan mathematics. berlin, germany: springer; 2013. 18. novotni aa, feijo ra, padra c, taroco e. topolog sensit analysis. comput method appl mech eng. 2003;192(7-8):803-829. 19. amstutz s. sensit analysi respect local perturb materi property. asymptot anal. 2006;49(1-2):87-108. 20. giusti sm, ferrer a, oliv j. topolog sensit analysi heterogen anisotrop elast problem. theoret computa- tional aspects. comput method appl mech eng. 2016;311:134-150. 21. noced j, wright s. numer optimization: new york, ny: springer scienc & busi media; 2006. 22. uzawa h. iter method concav programming. studi linear nonlinear programming. vol. 6. stanford, ca: stanford univers press; 1958. 23. amstutz s. analysi level set method topolog optimization. optim method softw. 2011;26(4-5):555-573. ferrer et al. 23 24. gome lope c, batista do santo r, novotni aa. topolog derivative-bas topolog optim structur subject multipl load-cases. lat j solid struct. 2015;12(5):834-860. 25. campeo de, giusti sm, novotni aa. topolog design plate consid differ volum control methods. eng comput. 2014;31(5):826-842. 26. giusti sm. anlis sensibilidad topolgica em modelo constitutivo multi-escala [phd thesis]. petrpolis, brazil: laboratrio nacion computao cientfica; 2009. cite article: ferrer a, cant jc, hernndez ja, oliv j. two-scal topolog optimiza- tion comput materi design: integr approach. int j numer method eng. 2017;123. view public statsview public stat two-scal topolog optim comput materi design: integr approach abstract introduct topolog deriv multiscal topolog optim topolog deriv augment lagrangian slerp algorithm macroscop microscop topolog optim problem multiscal materi design problem formul p2p materi design problem brief review p2p approach comput vademecum strategi algorithm numer exampl p2p materi design problem cb approach (design components) suboptim reformul strategi algorithm numer result cb materi design problem consist effici multiscal topolog optim p2p multiscal topolog optim cb multiscal topolog optim numer result comment limit conclus refer